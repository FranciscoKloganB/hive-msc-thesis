<!DOCTYPE html>
<html lang="en" >
<head>
    <meta charset="utf-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
    <title>app.domain</title>
    

    <link rel="stylesheet" href="_static/css/redactor.css" type="text/css" />
    
    
    <link rel="index" title="Index" href="genindex.html"/>
    <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="Hives - P2P Stochastic Swarm Guidance Simulator" href="index.html"/>
    <link rel="up" title="App Documentation" href="app.html"/>
    <link rel="next" title="app.domain.helpers" href="app.domain.helpers.html"/>
    <link rel="prev" title="App Documentation" href="app.html"/> 
</head>

<body role="document">
     

    
<a href="#" id="js-navigation-toggle" class="navigation-toggle">
    <i class="mdi mdi-menu"></i><i class="mdi mdi-close"></i>
</a>

<section class="site-sidebar">

<nav>


    <a href="index.html" class="branding-link">
    
        Hives
    
    
    
        
        
            <span class="branding-link__version">
                1.6
            </span>
        
    
    </a>

    
<section role="search">
    <form action="search.html" method="get" class="site-searchform">
        <input type="text" name="q" placeholder="Search docs" />
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
      </form>
</section>



    <section class="site-nav">
    
    
        <p class="caption"><span class="caption-text">Navbar</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="quickstartdocs.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="scriptdocs.html">Scripts and Flags</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="app.html">App Documentation</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="app.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">app.domain</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#subpackages">Subpackages</a></li>
<li class="toctree-l4"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-app.domain.cluster_groups">app.domain.cluster_groups</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-app.domain.master_servers">app.domain.master_servers</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-app.domain.network_nodes">app.domain.network_nodes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="app.utils.html">app.utils</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="app.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="app.html#module-app.environment_settings">app.environment_settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="app.html#module-app.hive_simulation">app.hive_simulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="app.html#module-app.mixing_rate_sampler">app.mixing_rate_sampler</a></li>
<li class="toctree-l2"><a class="reference internal" href="app.html#module-app.simfile_generator">app.simfile_generator</a></li>
<li class="toctree-l2"><a class="reference internal" href="app.html#module-app.type_hints">app.type_hints</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="notedocs.html">Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="indices.html">Indices</a></li>
</ul>

    
    </section>

</nav>

</section>

    <main class="site-main" role="main">
        











<nav class="site-breadcrumbs">
    <ul>
    
        <li>
            <a href="index.html">Docs</a> /
        </li>
        
        <li>
            <a href="app.html">App Documentation</a> /
        </li>
        
        <li class="site-breadcrumbs__leaf">app.domain</li>
    
    </ul>
</nav>
        <section class="site-content">
            <div class="container">
                
  <div class="section" id="module-app.domain">
<span id="app-domain"></span><h1>app.domain</h1>
<div class="section" id="subpackages">
<h2>Subpackages</h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="app.domain.helpers.html">app.domain.helpers</a></li>
</ul>
</div>
</div>
<div class="section" id="submodules">
<h2>Submodules</h2>
</div>
<div class="section" id="module-app.domain.cluster_groups">
<span id="app-domain-cluster-groups"></span><h2>app.domain.cluster_groups</h2>
<p>This module contains domain specific classes that represent groups of
storage nodes.</p>
<dl class="py class">
<dt id="app.domain.cluster_groups.Cluster">
<em class="property">class </em><code class="sig-name descname">Cluster</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">master</span></em>, <em class="sig-param"><span class="n">file_name</span></em>, <em class="sig-param"><span class="n">members</span></em>, <em class="sig-param"><span class="n">sim_id</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">origin</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/cluster_groups.html#Cluster"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Represents a group of network nodes ensuring the durability of a file.</p>
<dl class="py attribute">
<dt id="app.domain.cluster_groups.Cluster.id">
<code class="sig-name descname">id</code></dt>
<dd><p>A unique identifier of the <code class="docutils literal notranslate"><span class="pre">Cluster</span></code> instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="app.domain.cluster_groups.Cluster.current_epoch">
<code class="sig-name descname">current_epoch</code></dt>
<dd><p>The simulation’s current epoch.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="app.domain.cluster_groups.Cluster.corruption_chances">
<code class="sig-name descname">corruption_chances</code></dt>
<dd><p>A two-element list containing the probability of
<a class="reference internal" href="app.domain.helpers.html#app.domain.helpers.smart_dataclasses.FileBlockData" title="app.domain.helpers.smart_dataclasses.FileBlockData"><code class="xref py py-class docutils literal notranslate"><span class="pre">FileBlockData</span></code></a>
being corrupted and not being corrupted, respectively. See
<a class="reference internal" href="#app.domain.cluster_groups.Cluster._assign_disk_error_chance" title="app.domain.cluster_groups.Cluster._assign_disk_error_chance"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_assign_disk_error_chance()</span></code></a>
for corruption chance configuration.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>List[float]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="app.domain.cluster_groups.Cluster.master">
<code class="sig-name descname">master</code></dt>
<dd><p>A reference to a server that coordinates or monitors the <code class="docutils literal notranslate"><span class="pre">Cluster</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#app.domain.master_servers.Master" title="app.domain.master_servers.Master"><code class="xref py py-class docutils literal notranslate"><span class="pre">Master</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="app.domain.cluster_groups.Cluster.members">
<code class="sig-name descname">members</code></dt>
<dd><p>A collection of network nodes that belong to the <code class="docutils literal notranslate"><span class="pre">Cluster</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>List[<a class="reference internal" href="#app.domain.network_nodes.Node" title="app.domain.network_nodes.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">Node</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="app.domain.cluster_groups.Cluster.file">
<code class="sig-name descname">file</code></dt>
<dd><p>A reference to
<a class="reference internal" href="app.domain.helpers.html#app.domain.helpers.smart_dataclasses.FileData" title="app.domain.helpers.smart_dataclasses.FileData"><code class="xref py py-class docutils literal notranslate"><span class="pre">FileData</span></code></a>
object that represents the file being persisted by the Cluster
instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="app.domain.helpers.html#app.domain.helpers.smart_dataclasses.FileData" title="app.domain.helpers.smart_dataclasses.FileData"><code class="xref py py-class docutils literal notranslate"><span class="pre">FileData</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="app.domain.cluster_groups.Cluster.critical_size">
<code class="sig-name descname">critical_size</code></dt>
<dd><p>Minimum number of network nodes plus required to exist in the
Cluster to assure the target replication level.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="app.domain.cluster_groups.Cluster.sufficient_size">
<code class="sig-name descname">sufficient_size</code></dt>
<dd><p>Sum of <a class="reference internal" href="#app.domain.cluster_groups.Cluster.critical_size" title="app.domain.cluster_groups.Cluster.critical_size"><code class="xref py py-attr docutils literal notranslate"><span class="pre">critical_size</span></code></a>
and the number of nodes expected to fail between two successive
recovery phases.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="app.domain.cluster_groups.Cluster.original_size">
<code class="sig-name descname">original_size</code></dt>
<dd><p>The initial and theoretically optimal
<a class="reference internal" href="#app.domain.cluster_groups.Cluster" title="app.domain.cluster_groups.Cluster"><code class="xref py py-class docutils literal notranslate"><span class="pre">Cluster</span></code></a> size.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="app.domain.cluster_groups.Cluster.redundant_size">
<code class="sig-name descname">redundant_size</code></dt>
<dd><p>Application-specific parameter, which indicates that membership
of the Cluster must be pruned.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="app.domain.cluster_groups.Cluster.running">
<code class="sig-name descname">running</code></dt>
<dd><p>Indicates if the Cluster instance is active. Used by
<a class="reference internal" href="#app.domain.master_servers.Master" title="app.domain.master_servers.Master"><code class="xref py py-class docutils literal notranslate"><span class="pre">Master</span></code></a> to manage the
simulation processes.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="app.domain.cluster_groups.Cluster._recovery_epoch_sum">
<code class="sig-name descname">_recovery_epoch_sum</code></dt>
<dd><p>Helper attribute that facilitates the storage of the sum of the
values returned by all
<code class="xref py py-meth docutils literal notranslate"><span class="pre">set_recovery_epoch()</span></code>
method calls. Important for logging purposes.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="app.domain.cluster_groups.Cluster._recovery_epoch_calls">
<code class="sig-name descname">_recovery_epoch_calls</code></dt>
<dd><p>Helper attribute that facilitates the storage of the sum of the
values returned by all
<code class="xref py py-meth docutils literal notranslate"><span class="pre">set_recovery_epoch()</span></code>
method calls throughout the <a class="reference internal" href="#app.domain.cluster_groups.Cluster.current_epoch" title="app.domain.cluster_groups.Cluster.current_epoch"><code class="xref py py-attr docutils literal notranslate"><span class="pre">current_epoch</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.cluster_groups.Cluster.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">master</span></em>, <em class="sig-param"><span class="n">file_name</span></em>, <em class="sig-param"><span class="n">members</span></em>, <em class="sig-param"><span class="n">sim_id</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">origin</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/cluster_groups.html#Cluster.__init__"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Instantiates an <code class="docutils literal notranslate"><span class="pre">Cluster</span></code> object</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>master</strong> (<em>th.MasterType</em>) – A reference to an <a class="reference internal" href="#app.domain.master_servers.Master" title="app.domain.master_servers.Master"><code class="xref py py-class docutils literal notranslate"><span class="pre">Master</span></code></a>
object that manages the <code class="docutils literal notranslate"><span class="pre">Cluster</span></code> being initialized.</p></li>
<li><p><strong>file_name</strong> (<em>str</em>) – The name of the file the <code class="docutils literal notranslate"><span class="pre">Cluster</span></code> is responsible for
persisting.</p></li>
<li><p><strong>members</strong> (<em>th.NodeDict</em>) – A dictionary where keys are <a class="reference internal" href="#app.domain.network_nodes.Node.id" title="app.domain.network_nodes.Node.id"><code class="xref py py-attr docutils literal notranslate"><span class="pre">node</span> <span class="pre">identifiers</span></code></a> and values are their
instance objects.</p></li>
<li><p><strong>sim_id</strong> (<em>int</em>) – Identifier that generates unique output file names,
thus guaranteeing that different simulation instances do not
overwrite previous out files.</p></li>
<li><p><strong>origin</strong> (<em>str</em>) – The name of the simulation file name that started
the simulation process.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.cluster_groups.Cluster._assign_disk_error_chance">
<code class="sig-name descname">_assign_disk_error_chance</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/cluster_groups.html#Cluster._assign_disk_error_chance"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Defines the probability of a file block being corrupted while stored
at the disk of a
<a class="reference internal" href="#app.domain.network_nodes.Node" title="app.domain.network_nodes.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">network</span> <span class="pre">node</span></code></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Recommended value should be based on the paper named
<a class="reference external" href="http://www.cs.toronto.edu/bianca/papers/fast08.pdf">An Analysis of Data Corruption in the Storage Stack</a>. Thus
the current implementation follows this formula:</p>
<blockquote>
<div><p>(<a class="reference internal" href="#app.domain.master_servers.Master.MAX_EPOCHS" title="app.domain.master_servers.Master.MAX_EPOCHS"><code class="xref py py-const docutils literal notranslate"><span class="pre">MAX_EPOCHS</span></code></a> / <a class="reference internal" href="app.html#app.environment_settings.MONTH_EPOCHS" title="app.environment_settings.MONTH_EPOCHS"><code class="xref py py-const docutils literal notranslate"><span class="pre">MONTH_EPOCHS</span></code></a>) * <code class="docutils literal notranslate"><span class="pre">P(Xt</span> <span class="pre">≥</span> <span class="pre">L)</span></code>)</p>
</div></blockquote>
<p>The notation <code class="docutils literal notranslate"><span class="pre">P(Xt</span> <span class="pre">≥</span> <span class="pre">L)</span></code> denotes the probability of a disk
developing at least L checksum mismatches within T months since
the disk’s first use in the field. As described in linked paper.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A two element list with respectively, the probability of losing
and the probability of not losing a file block due to disk
errors, at an epoch basis.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>List[float]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.cluster_groups.Cluster._get_new_members">
<code class="sig-name descname">_get_new_members</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/cluster_groups.html#Cluster._get_new_members"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Helper method that searches for possible
<a class="reference internal" href="#app.domain.network_nodes.Node" title="app.domain.network_nodes.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">network</span> <span class="pre">node</span></code></a> by querying
the <a class="reference internal" href="#app.domain.cluster_groups.Cluster.master" title="app.domain.cluster_groups.Cluster.master"><code class="xref py py-attr docutils literal notranslate"><span class="pre">master</span></code></a> of the <code class="docutils literal notranslate"><span class="pre">Cluster</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A dictionary mapping where keys are
<a class="reference internal" href="#app.domain.network_nodes.Node.id" title="app.domain.network_nodes.Node.id"><code class="xref py py-attr docutils literal notranslate"><span class="pre">node</span> <span class="pre">identifiers</span></code></a>
and values are
<a class="reference internal" href="#app.domain.network_nodes.Node" title="app.domain.network_nodes.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">node</span> <span class="pre">instances</span></code></a>.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>th.NodeDict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.cluster_groups.Cluster._log_evaluation">
<code class="sig-name descname">_log_evaluation</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pcount</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/cluster_groups.html#Cluster._log_evaluation"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Helper that collects <code class="docutils literal notranslate"><span class="pre">Cluster</span></code> data and registers it on a
<a class="reference internal" href="app.domain.helpers.html#app.domain.helpers.smart_dataclasses.LoggingData" title="app.domain.helpers.smart_dataclasses.LoggingData"><code class="xref py py-class docutils literal notranslate"><span class="pre">logger</span></code></a>
object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pcount</strong> (<em>int</em>) – The number of existing parts in the system at the
simulation’s current epoch.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.cluster_groups.Cluster._set_fail">
<code class="sig-name descname">_set_fail</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">message</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/cluster_groups.html#Cluster._set_fail"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Ends the Cluster instance simulation.</p>
<p>Sets <a class="reference internal" href="#app.domain.cluster_groups.Cluster.running" title="app.domain.cluster_groups.Cluster.running"><code class="xref py py-attr docutils literal notranslate"><span class="pre">running</span></code></a> to <code class="docutils literal notranslate"><span class="pre">False</span></code> and orders
<a class="reference internal" href="app.domain.helpers.html#app.domain.helpers.smart_dataclasses.FileData" title="app.domain.helpers.smart_dataclasses.FileData"><code class="xref py py-class docutils literal notranslate"><span class="pre">FileData</span></code></a> to write
<a class="reference internal" href="app.domain.helpers.html#app.domain.helpers.smart_dataclasses.LoggingData" title="app.domain.helpers.smart_dataclasses.LoggingData"><code class="xref py py-class docutils literal notranslate"><span class="pre">collected</span> <span class="pre">logs</span></code></a>
to disk and close it’s
<a class="reference internal" href="app.domain.helpers.html#app.domain.helpers.smart_dataclasses.FileData.out_file" title="app.domain.helpers.smart_dataclasses.FileData.out_file"><code class="xref py py-attr docutils literal notranslate"><span class="pre">out_file</span></code></a>
stream.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>message</strong> (<em>str</em>) – A short explanation of why the <code class="docutils literal notranslate"><span class="pre">Cluster</span></code> terminated early.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.cluster_groups.Cluster._setup_epoch">
<code class="sig-name descname">_setup_epoch</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">epoch</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/cluster_groups.html#Cluster._setup_epoch"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Initializes some attributes of the <code class="docutils literal notranslate"><span class="pre">Cluster</span></code> during
its initialization.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>epoch</strong> (<em>int</em>) – The simulation’s current epoch.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.cluster_groups.Cluster.complain">
<code class="sig-name descname">complain</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">complainter</span></em>, <em class="sig-param"><span class="n">complainee</span></em>, <em class="sig-param"><span class="n">reason</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/cluster_groups.html#Cluster.complain"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Registers a complaint against a possibly offline node.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method provides no default functionality and should be
overridden in sub classes if required.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>complainter</strong> (<em>str</em>) – The identifier of the complaining <a class="reference internal" href="#app.domain.network_nodes.Node" title="app.domain.network_nodes.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">network</span> <span class="pre">node</span></code></a>.</p></li>
<li><p><strong>complainee</strong> (<em>str</em>) – The identifier of the <a class="reference internal" href="#app.domain.network_nodes.Node" title="app.domain.network_nodes.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">network</span> <span class="pre">node</span></code></a> being complained about.</p></li>
<li><p><strong>reason</strong> (<a class="reference internal" href="app.html#app.type_hints.HttpResponse" title="app.type_hints.HttpResponse"><code class="xref py py-data docutils literal notranslate"><span class="pre">app.type_hints.HttpResponse</span></code></a>) – The <a class="reference internal" href="app.domain.helpers.html#app.domain.helpers.enums.HttpCodes" title="app.domain.helpers.enums.HttpCodes"><code class="xref py py-class docutils literal notranslate"><span class="pre">http</span> <span class="pre">code</span></code></a>
that led to the complaint.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.cluster_groups.Cluster.evaluate">
<code class="sig-name descname">evaluate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/cluster_groups.html#Cluster.evaluate"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Evaluates and logs the health, possibly other parameters, of the
<code class="docutils literal notranslate"><span class="pre">Cluster</span></code> at every epoch.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.cluster_groups.Cluster.execute_epoch">
<code class="sig-name descname">execute_epoch</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">epoch</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/cluster_groups.html#Cluster.execute_epoch"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Orders all <a class="reference internal" href="#app.domain.cluster_groups.Cluster.members" title="app.domain.cluster_groups.Cluster.members"><code class="xref py py-attr docutils literal notranslate"><span class="pre">members</span></code></a> to execute their epoch.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the <code class="docutils literal notranslate"><span class="pre">Cluster</span></code> terminates early, before it reaches
<a class="reference internal" href="#app.domain.master_servers.Master.MAX_EPOCHS" title="app.domain.master_servers.Master.MAX_EPOCHS"><code class="xref py py-const docutils literal notranslate"><span class="pre">MAX_EPOCHS</span></code></a>,
nothing should be logged in
<a class="reference internal" href="app.domain.helpers.html#app.domain.helpers.smart_dataclasses.LoggingData" title="app.domain.helpers.smart_dataclasses.LoggingData"><code class="xref py py-class docutils literal notranslate"><span class="pre">LoggingData</span></code></a>
at the specified <code class="docutils literal notranslate"><span class="pre">epoch</span></code> to avoid skewing previously
collected results.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>epoch</strong> (<em>int</em>) – The epoch the <code class="docutils literal notranslate"><span class="pre">Cluster</span></code> should currently be in, according
to it’s managing <a class="reference internal" href="#app.domain.cluster_groups.Cluster.master" title="app.domain.cluster_groups.Cluster.master"><code class="xref py py-attr docutils literal notranslate"><span class="pre">master</span></code></a> entity.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">False</span></code> if <code class="docutils literal notranslate"><span class="pre">Cluster</span></code> failed to persist the <a class="reference internal" href="#app.domain.cluster_groups.Cluster.file" title="app.domain.cluster_groups.Cluster.file"><code class="xref py py-attr docutils literal notranslate"><span class="pre">file</span></code></a> it was
responsible for, otherwise <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.cluster_groups.Cluster.get_cluster_status">
<code class="sig-name descname">get_cluster_status</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/cluster_groups.html#Cluster.get_cluster_status"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Determines the <code class="docutils literal notranslate"><span class="pre">Cluster</span></code>’s status based on the length of the
current <a class="reference internal" href="#app.domain.cluster_groups.Cluster.members" title="app.domain.cluster_groups.Cluster.members"><code class="xref py py-attr docutils literal notranslate"><span class="pre">members</span></code></a> list.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The status of the <code class="docutils literal notranslate"><span class="pre">Cluster</span></code> as a string.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.cluster_groups.Cluster.maintain">
<code class="sig-name descname">maintain</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">off_nodes</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/cluster_groups.html#Cluster.maintain"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Evicts disconnected <a class="reference internal" href="#app.domain.cluster_groups.Cluster.members" title="app.domain.cluster_groups.Cluster.members"><code class="xref py py-attr docutils literal notranslate"><span class="pre">members</span></code></a> from the <code class="docutils literal notranslate"><span class="pre">Cluster</span></code> and
attempts to recruit new ones.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>off_nodes</strong> (<em>List</em><em>[</em><em>th.NodeType</em><em>]</em>) – The subset of <a class="reference internal" href="#app.domain.cluster_groups.Cluster.members" title="app.domain.cluster_groups.Cluster.members"><code class="xref py py-attr docutils literal notranslate"><span class="pre">members</span></code></a> who disconnected during the
current epoch.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.cluster_groups.Cluster.membership_maintenance">
<code class="sig-name descname">membership_maintenance</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/cluster_groups.html#Cluster.membership_maintenance"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Attempts to recruits new
<a class="reference internal" href="#app.domain.network_nodes.Node" title="app.domain.network_nodes.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">network</span> <span class="pre">nodes</span></code></a> as members
of the <code class="docutils literal notranslate"><span class="pre">Cluster</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A dictionary that is empty if membership did not change.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>th.NodeDict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.cluster_groups.Cluster.nodes_execute">
<code class="sig-name descname">nodes_execute</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/cluster_groups.html#Cluster.nodes_execute"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Queries all <a class="reference internal" href="#app.domain.cluster_groups.Cluster.members" title="app.domain.cluster_groups.Cluster.members"><code class="xref py py-attr docutils literal notranslate"><span class="pre">members</span></code></a> to execute the epoch.</p>
<p>This method logs the amount of lost replicas throughout
<a class="reference internal" href="#app.domain.cluster_groups.Cluster.current_epoch" title="app.domain.cluster_groups.Cluster.current_epoch"><code class="xref py py-attr docutils literal notranslate"><span class="pre">current_epoch</span></code></a> according to the <a class="reference internal" href="#app.domain.cluster_groups.Cluster.members" title="app.domain.cluster_groups.Cluster.members"><code class="xref py py-attr docutils literal notranslate"><span class="pre">members</span></code></a> who went
offline and the
<a class="reference internal" href="app.domain.helpers.html#app.domain.helpers.smart_dataclasses.FileBlockData" title="app.domain.helpers.smart_dataclasses.FileBlockData"><code class="xref py py-class docutils literal notranslate"><span class="pre">FileBlockData</span></code></a>
replicas they posssed and is responsible for
<a class="reference internal" href="#app.domain.cluster_groups.Cluster.set_replication_epoch" title="app.domain.cluster_groups.Cluster.set_replication_epoch"><code class="xref py py-meth docutils literal notranslate"><span class="pre">setting</span> <span class="pre">a</span> <span class="pre">replication</span> <span class="pre">epoch</span></code></a>.
Similarly it logs the number of members who disconnected.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>List of <a class="reference internal" href="#app.domain.cluster_groups.Cluster.members" title="app.domain.cluster_groups.Cluster.members"><code class="xref py py-attr docutils literal notranslate"><span class="pre">members</span></code></a> that disconnected during the
<a class="reference internal" href="#app.domain.cluster_groups.Cluster.current_epoch" title="app.domain.cluster_groups.Cluster.current_epoch"><code class="xref py py-attr docutils literal notranslate"><span class="pre">current_epoch</span></code></a>. See
<a class="reference internal" href="#app.domain.network_nodes.Node.get_status" title="app.domain.network_nodes.Node.get_status"><code class="xref py py-meth docutils literal notranslate"><span class="pre">app.domain.network_nodes.Node.get_status()</span></code></a>.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>List[th.NodeType]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.cluster_groups.Cluster.route_part">
<code class="sig-name descname">route_part</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sender</span></em>, <em class="sig-param"><span class="n">receiver</span></em>, <em class="sig-param"><span class="n">replica</span></em>, <em class="sig-param"><span class="n">fresh_replica</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/cluster_groups.html#Cluster.route_part"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Sends a <a class="reference internal" href="app.domain.helpers.html#app.domain.helpers.smart_dataclasses.FileBlockData" title="app.domain.helpers.smart_dataclasses.FileBlockData"><code class="xref py py-class docutils literal notranslate"><span class="pre">file</span> <span class="pre">block</span> <span class="pre">replica</span></code></a> to some other
<a class="reference internal" href="#app.domain.network_nodes.Node" title="app.domain.network_nodes.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">network</span> <span class="pre">node</span></code></a> in
<a class="reference internal" href="#app.domain.cluster_groups.Cluster.members" title="app.domain.cluster_groups.Cluster.members"><code class="xref py py-attr docutils literal notranslate"><span class="pre">members</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sender</strong> (<em>str</em>) – An identifier of the
<a class="reference internal" href="#app.domain.network_nodes.Node" title="app.domain.network_nodes.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">network</span> <span class="pre">node</span></code></a>
who is sending the message.</p></li>
<li><p><strong>receiver</strong> (<em>str</em>) – The destination
<a class="reference internal" href="#app.domain.network_nodes.Node" title="app.domain.network_nodes.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">network</span> <span class="pre">node</span></code></a>
identifier.</p></li>
<li><p><strong>replica</strong> (<em>sd.FileBlockData</em>) – The <a class="reference internal" href="app.domain.helpers.html#app.domain.helpers.smart_dataclasses.FileBlockData" title="app.domain.helpers.smart_dataclasses.FileBlockData"><code class="xref py py-class docutils literal notranslate"><span class="pre">file</span> <span class="pre">block</span> <span class="pre">replica</span></code></a>
to be sent specified destination: <code class="docutils literal notranslate"><span class="pre">receiver</span></code>.</p></li>
<li><p><strong>fresh_replica</strong> (<em>bool</em>) – Prevents recently created replicas from being
corrupted, since they are not likely to be corrupted in disk.
This argument facilitates simulation.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The <a class="reference internal" href="app.domain.helpers.html#app.domain.helpers.enums.HttpCodes" title="app.domain.helpers.enums.HttpCodes"><code class="xref py py-class docutils literal notranslate"><span class="pre">http</span> <span class="pre">code</span></code></a>
received as reply from the destination of this message.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>th.HttpResponse</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.cluster_groups.Cluster.set_replication_epoch">
<code class="sig-name descname">set_replication_epoch</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">replica</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/cluster_groups.html#Cluster.set_replication_epoch"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Delegates to <a class="reference internal" href="app.domain.helpers.html#app.domain.helpers.smart_dataclasses.FileBlockData.set_replication_epoch" title="app.domain.helpers.smart_dataclasses.FileBlockData.set_replication_epoch"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set_replication_epoch()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>replica</strong> (<a class="reference internal" href="app.domain.helpers.html#app.domain.helpers.smart_dataclasses.FileBlockData" title="app.domain.helpers.smart_dataclasses.FileBlockData"><em>domain.helpers.smart_dataclasses.FileBlockData</em></a>) – The <a class="reference internal" href="app.domain.helpers.html#app.domain.helpers.smart_dataclasses.FileBlockData" title="app.domain.helpers.smart_dataclasses.FileBlockData"><code class="xref py py-class docutils literal notranslate"><span class="pre">file</span> <span class="pre">block</span> <span class="pre">replica</span></code></a> that
was lost.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.cluster_groups.Cluster.spread_files">
<code class="sig-name descname">spread_files</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">replicas</span></em>, <em class="sig-param"><span class="n">strat</span><span class="o">=</span><span class="default_value">'i'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/cluster_groups.html#Cluster.spread_files"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Distributes a collection of
<a class="reference internal" href="app.domain.helpers.html#app.domain.helpers.smart_dataclasses.FileBlockData" title="app.domain.helpers.smart_dataclasses.FileBlockData"><code class="xref py py-class docutils literal notranslate"><span class="pre">FileBlockData</span></code></a>
objects among the <a class="reference internal" href="#app.domain.cluster_groups.Cluster.members" title="app.domain.cluster_groups.Cluster.members"><code class="xref py py-attr docutils literal notranslate"><span class="pre">members</span></code></a> of the <code class="docutils literal notranslate"><span class="pre">Cluster</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>replicas</strong> (<em>th.ReplicasDict</em>) – The <a class="reference internal" href="app.domain.helpers.html#app.domain.helpers.smart_dataclasses.FileBlockData" title="app.domain.helpers.smart_dataclasses.FileBlockData"><code class="xref py py-class docutils literal notranslate"><span class="pre">FileBlockData</span></code></a>
replicas, without replication.</p></li>
<li><p><strong>strat</strong> (<em>str</em>) – Defines how <code class="docutils literal notranslate"><span class="pre">replicas</span></code> will be initially distributed in
the <code class="docutils literal notranslate"><span class="pre">Cluster</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="app.domain.cluster_groups.HDFSCluster">
<em class="property">class </em><code class="sig-name descname">HDFSCluster</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">master</span></em>, <em class="sig-param"><span class="n">file_name</span></em>, <em class="sig-param"><span class="n">members</span></em>, <em class="sig-param"><span class="n">sim_id</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">origin</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/cluster_groups.html#HDFSCluster"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Bases: <a class="reference internal" href="#app.domain.cluster_groups.Cluster" title="app.domain.cluster_groups.Cluster"><code class="xref py py-class docutils literal notranslate"><span class="pre">app.domain.cluster_groups.Cluster</span></code></a></p>
<p>Represents a group of network nodes ensuring the durability of a file
in a Hadoop Distributed File System scenario.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Members of <code class="docutils literal notranslate"><span class="pre">HDFSCluster</span></code> are of type
<a class="reference internal" href="#app.domain.network_nodes.HDFSNode" title="app.domain.network_nodes.HDFSNode"><code class="xref py py-class docutils literal notranslate"><span class="pre">HDFSNode</span></code></a>, they do not
perform swarm guidance behaviors and instead report with regular
heartbeats to their <a class="reference internal" href="#app.domain.cluster_groups.HDFSCluster" title="app.domain.cluster_groups.HDFSCluster"><code class="xref py py-class docutils literal notranslate"><span class="pre">monitors</span></code></a>. This class could be a
<em>NameNode Server</em> in HDFS or a <em>master server</em> in GFS.</p>
</div>
<dl class="py attribute">
<dt id="app.domain.cluster_groups.HDFSCluster.suspicious_nodes">
<code class="sig-name descname">suspicious_nodes</code></dt>
<dd><p>A set containing the identifiers of suspicious
<a class="reference internal" href="#app.domain.network_nodes.HDFSNode" title="app.domain.network_nodes.HDFSNode"><code class="xref py py-class docutils literal notranslate"><span class="pre">network</span> <span class="pre">nodes</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>set</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="app.domain.cluster_groups.HDFSCluster.data_node_heartbeats">
<code class="sig-name descname">data_node_heartbeats</code></dt>
<dd><p>A dictionary mapping <a class="reference internal" href="#app.domain.network_nodes.Node.id" title="app.domain.network_nodes.Node.id"><code class="xref py py-attr docutils literal notranslate"><span class="pre">node</span> <span class="pre">identifiers</span></code></a> to the number of
complaints made against them. Each node has five lives. When they
miss five beats in a row, i.e., when the dictionary value count
is zero, they are evicted from the cluster.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Dict[str, int]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.cluster_groups.HDFSCluster.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">master</span></em>, <em class="sig-param"><span class="n">file_name</span></em>, <em class="sig-param"><span class="n">members</span></em>, <em class="sig-param"><span class="n">sim_id</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">origin</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/cluster_groups.html#HDFSCluster.__init__"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Instantiates an <code class="docutils literal notranslate"><span class="pre">Cluster</span></code> object</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>master</strong> (<em>th.MasterType</em>) – A reference to an <a class="reference internal" href="#app.domain.master_servers.Master" title="app.domain.master_servers.Master"><code class="xref py py-class docutils literal notranslate"><span class="pre">Master</span></code></a>
object that manages the <code class="docutils literal notranslate"><span class="pre">Cluster</span></code> being initialized.</p></li>
<li><p><strong>file_name</strong> (<em>str</em>) – The name of the file the <code class="docutils literal notranslate"><span class="pre">Cluster</span></code> is responsible for
persisting.</p></li>
<li><p><strong>members</strong> (<em>th.NodeDict</em>) – A dictionary where keys are <a class="reference internal" href="#app.domain.network_nodes.Node.id" title="app.domain.network_nodes.Node.id"><code class="xref py py-attr docutils literal notranslate"><span class="pre">node</span> <span class="pre">identifiers</span></code></a> and values are their
instance objects.</p></li>
<li><p><strong>sim_id</strong> (<em>int</em>) – Identifier that generates unique output file names,
thus guaranteeing that different simulation instances do not
overwrite previous out files.</p></li>
<li><p><strong>origin</strong> (<em>str</em>) – The name of the simulation file name that started
the simulation process.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.cluster_groups.HDFSCluster.evaluate">
<code class="sig-name descname">evaluate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/cluster_groups.html#HDFSCluster.evaluate"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Logs the number of existing replicas in the <code class="docutils literal notranslate"><span class="pre">HDFSCluster</span></code>.</p>
<dl class="simple">
<dt>Overrides:</dt><dd><p><a class="reference internal" href="#app.domain.cluster_groups.Cluster.evaluate" title="app.domain.cluster_groups.Cluster.evaluate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">app.domain.cluster_groups.Cluster.evaluate()</span></code></a>.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.cluster_groups.HDFSCluster.maintain">
<code class="sig-name descname">maintain</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">off_nodes</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/cluster_groups.html#HDFSCluster.maintain"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Evicts any <a class="reference internal" href="#app.domain.network_nodes.HDFSNode" title="app.domain.network_nodes.HDFSNode"><code class="xref py py-class docutils literal notranslate"><span class="pre">network</span> <span class="pre">node</span></code></a>
whose heartbeats in <a class="reference internal" href="#app.domain.cluster_groups.HDFSCluster.data_node_heartbeats" title="app.domain.cluster_groups.HDFSCluster.data_node_heartbeats"><code class="xref py py-attr docutils literal notranslate"><span class="pre">data_node_heartbeats</span></code></a> reached zero.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>off_nodes</strong> (<em>List</em><em>[</em><em>th.NodeType</em><em>]</em>) – The subset of <a class="reference internal" href="#app.domain.cluster_groups.Cluster.members" title="app.domain.cluster_groups.Cluster.members"><code class="xref py py-attr docutils literal notranslate"><span class="pre">members</span></code></a> who disconnected
during the current epoch.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
<dl class="simple">
<dt>Overrides:</dt><dd><p><a class="reference internal" href="#app.domain.cluster_groups.Cluster.execute_epoch" title="app.domain.cluster_groups.Cluster.execute_epoch"><code class="xref py py-meth docutils literal notranslate"><span class="pre">app.domain.cluster_groups.Cluster.execute_epoch()</span></code></a>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.cluster_groups.HDFSCluster.membership_maintenance">
<code class="sig-name descname">membership_maintenance</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/cluster_groups.html#HDFSCluster.membership_maintenance"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Attempts to recruits new
<a class="reference internal" href="#app.domain.network_nodes.Node" title="app.domain.network_nodes.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">network</span> <span class="pre">nodes</span></code></a> as members
of the <code class="docutils literal notranslate"><span class="pre">Cluster</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A dictionary that is empty if membership did not change.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>th.NodeDict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.cluster_groups.HDFSCluster.nodes_execute">
<code class="sig-name descname">nodes_execute</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/cluster_groups.html#HDFSCluster.nodes_execute"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Queries all <a class="reference internal" href="#app.domain.cluster_groups.Cluster.members" title="app.domain.cluster_groups.Cluster.members"><code class="xref py py-attr docutils literal notranslate"><span class="pre">members</span></code></a> to execute the epoch.</p>
<dl class="simple">
<dt>Overrides:</dt><dd><p><a class="reference internal" href="#app.domain.cluster_groups.Cluster.nodes_execute" title="app.domain.cluster_groups.Cluster.nodes_execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">app.domain.cluster_groups.Cluster.nodes_execute()</span></code></a></p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A collection of <a class="reference internal" href="#app.domain.cluster_groups.Cluster.members" title="app.domain.cluster_groups.Cluster.members"><code class="xref py py-attr docutils literal notranslate"><span class="pre">members</span></code></a> who disconnected
during the current epoch.
See <a class="reference internal" href="#app.domain.network_nodes.HDFSNode.get_status" title="app.domain.network_nodes.HDFSNode.get_status"><code class="xref py py-meth docutils literal notranslate"><span class="pre">app.domain.network_nodes.HDFSNode.get_status()</span></code></a>.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>List[th.NodeType]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.cluster_groups.HDFSCluster.spread_files">
<code class="sig-name descname">spread_files</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">replicas</span></em>, <em class="sig-param"><span class="n">strat</span><span class="o">=</span><span class="default_value">'i'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/cluster_groups.html#HDFSCluster.spread_files"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Distributes a collection of
<a class="reference internal" href="app.domain.helpers.html#app.domain.helpers.smart_dataclasses.FileBlockData" title="app.domain.helpers.smart_dataclasses.FileBlockData"><code class="xref py py-class docutils literal notranslate"><span class="pre">FileBlockData</span></code></a>
objects among the <a class="reference internal" href="#app.domain.cluster_groups.Cluster.members" title="app.domain.cluster_groups.Cluster.members"><code class="xref py py-attr docutils literal notranslate"><span class="pre">members</span></code></a> of the <code class="docutils literal notranslate"><span class="pre">HDFSCluster</span></code>.</p>
<dl class="simple">
<dt>Overrides:</dt><dd><p><a class="reference internal" href="#app.domain.cluster_groups.Cluster.spread_files" title="app.domain.cluster_groups.Cluster.spread_files"><code class="xref py py-meth docutils literal notranslate"><span class="pre">app.domain.cluster_groups.Cluster.spread_files()</span></code></a>.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>replicas</strong> (<em>th.ReplicasDict</em>) – The <a class="reference internal" href="app.domain.helpers.html#app.domain.helpers.smart_dataclasses.FileBlockData" title="app.domain.helpers.smart_dataclasses.FileBlockData"><code class="xref py py-class docutils literal notranslate"><span class="pre">FileBlockData</span></code></a>
replicas, without replication.</p></li>
<li><p><strong>strat</strong> (<em>str</em>) – Defines how <code class="docutils literal notranslate"><span class="pre">replicas</span></code> will be initially distributed in
the <code class="docutils literal notranslate"><span class="pre">Cluster</span></code>. Regardless of the received value, the body
of this method will always set <code class="docutils literal notranslate"><span class="pre">strat</span></code> to default <code class="docutils literal notranslate"><span class="pre">&quot;i&quot;</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="app.domain.cluster_groups.HiveCluster">
<em class="property">class </em><code class="sig-name descname">HiveCluster</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">master</span></em>, <em class="sig-param"><span class="n">file_name</span></em>, <em class="sig-param"><span class="n">members</span></em>, <em class="sig-param"><span class="n">sim_id</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">origin</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/cluster_groups.html#HiveCluster"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Bases: <a class="reference internal" href="#app.domain.cluster_groups.Cluster" title="app.domain.cluster_groups.Cluster"><code class="xref py py-class docutils literal notranslate"><span class="pre">app.domain.cluster_groups.Cluster</span></code></a></p>
<p>Represents a group of network nodes persisting a file using swarm
guidance algorithm.</p>
<dl class="py attribute">
<dt id="app.domain.cluster_groups.HiveCluster.v_">
<code class="sig-name descname">v_</code></dt>
<dd><p>Density distribution hive members must achieve with independent
realizations for ideal persistence of the file.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v1.1.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="app.domain.cluster_groups.HiveCluster.cv_">
<code class="sig-name descname">cv_</code></dt>
<dd><p>Tracks the file current density distribution, updated at each epoch.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v1.1.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.cluster_groups.HiveCluster.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">master</span></em>, <em class="sig-param"><span class="n">file_name</span></em>, <em class="sig-param"><span class="n">members</span></em>, <em class="sig-param"><span class="n">sim_id</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">origin</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/cluster_groups.html#HiveCluster.__init__"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Instantiates an <code class="docutils literal notranslate"><span class="pre">Cluster</span></code> object</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>master</strong> (<em>th.MasterType</em>) – A reference to an <a class="reference internal" href="#app.domain.master_servers.Master" title="app.domain.master_servers.Master"><code class="xref py py-class docutils literal notranslate"><span class="pre">Master</span></code></a>
object that manages the <code class="docutils literal notranslate"><span class="pre">Cluster</span></code> being initialized.</p></li>
<li><p><strong>file_name</strong> (<em>str</em>) – The name of the file the <code class="docutils literal notranslate"><span class="pre">Cluster</span></code> is responsible for
persisting.</p></li>
<li><p><strong>members</strong> (<em>th.NodeDict</em>) – A dictionary where keys are <a class="reference internal" href="#app.domain.network_nodes.Node.id" title="app.domain.network_nodes.Node.id"><code class="xref py py-attr docutils literal notranslate"><span class="pre">node</span> <span class="pre">identifiers</span></code></a> and values are their
instance objects.</p></li>
<li><p><strong>sim_id</strong> (<em>int</em>) – Identifier that generates unique output file names,
thus guaranteeing that different simulation instances do not
overwrite previous out files.</p></li>
<li><p><strong>origin</strong> (<em>str</em>) – The name of the simulation file name that started
the simulation process.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.cluster_groups.HiveCluster._log_evaluation">
<code class="sig-name descname">_log_evaluation</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pcount</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/cluster_groups.html#HiveCluster._log_evaluation"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Helper that collects <code class="docutils literal notranslate"><span class="pre">Cluster</span></code> data and registers it on a
<a class="reference internal" href="app.domain.helpers.html#app.domain.helpers.smart_dataclasses.LoggingData" title="app.domain.helpers.smart_dataclasses.LoggingData"><code class="xref py py-class docutils literal notranslate"><span class="pre">logger</span></code></a>
object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pcount</strong> (<em>int</em>) – The number of existing parts in the system at the
simulation’s current epoch.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.cluster_groups.HiveCluster._pretty_print_eq_distr_table">
<code class="sig-name descname">_pretty_print_eq_distr_table</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">target</span></em>, <em class="sig-param"><span class="n">atol</span></em>, <em class="sig-param"><span class="n">rtol</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/cluster_groups.html#HiveCluster._pretty_print_eq_distr_table"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Pretty prints a PSQL formatted table for visual vector comparison.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>target</strong> (<a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v1.1.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a>) – The <a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v1.1.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> object to be formatted
as PSQL table.</p></li>
<li><p><strong>atol</strong> (<em>float</em>) – The allowed absolute tolerance.</p></li>
<li><p><strong>rtol</strong> (<em>float</em>) – The allowed relative tolerance.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Any</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.cluster_groups.HiveCluster._validate_transition_matrix">
<code class="sig-name descname">_validate_transition_matrix</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">transition_matrix</span></em>, <em class="sig-param"><span class="n">target_distribution</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/cluster_groups.html#HiveCluster._validate_transition_matrix"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Asserts if <code class="docutils literal notranslate"><span class="pre">transition_matrix</span></code> is a Markov Matrix.</p>
<p>Verification is done by raising the <code class="docutils literal notranslate"><span class="pre">transition_matrix</span></code> to the power
of <code class="docutils literal notranslate"><span class="pre">4096</span></code> (just a large number) and checking if all columns of the
powered matrix are element-wise equal to the
entries of <code class="docutils literal notranslate"><span class="pre">target_distribution</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>transition_matrix</strong> (<a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v1.1.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a>) – The matrix to be verified.</p></li>
<li><p><strong>target_distribution</strong> (<a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v1.1.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a>) – The steady state the <code class="docutils literal notranslate"><span class="pre">transition_matrix</span></code> is expected to have.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> if the matrix converges to the <code class="docutils literal notranslate"><span class="pre">target_distribution</span></code>,
otherwise <code class="docutils literal notranslate"><span class="pre">False</span></code>. I.e., if <code class="docutils literal notranslate"><span class="pre">transition_matrix</span></code> is a
markov matrix.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.cluster_groups.HiveCluster.add_cloud_reference">
<code class="sig-name descname">add_cloud_reference</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/cluster_groups.html#HiveCluster.add_cloud_reference"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Adds a cloud server to the <a class="reference internal" href="#app.domain.cluster_groups.Cluster.members" title="app.domain.cluster_groups.Cluster.members"><code class="xref py py-attr docutils literal notranslate"><span class="pre">members</span></code></a> of
the <code class="docutils literal notranslate"><span class="pre">HiveCluster</span></code>.</p>
<p>This method is used when <code class="docutils literal notranslate"><span class="pre">HiveCluster</span></code> membership size becomes
compromised and a backup solution using cloud approaches is desired.
The idea is that surviving members upload their replicas to the cloud
server, e.g., an Amazon S3 instance. See Master method
<a class="reference internal" href="#app.domain.master_servers.HiveMaster.get_cloud_reference" title="app.domain.master_servers.HiveMaster.get_cloud_reference"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_cloud_reference()</span></code></a>
for more details.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method is virtual.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.cluster_groups.HiveCluster.broadcast_transition_matrix">
<code class="sig-name descname">broadcast_transition_matrix</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">m</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/cluster_groups.html#HiveCluster.broadcast_transition_matrix"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Slices a  matrix and delivers columns to the respective
<a class="reference internal" href="#app.domain.network_nodes.HiveNode" title="app.domain.network_nodes.HiveNode"><code class="xref py py-class docutils literal notranslate"><span class="pre">network</span> <span class="pre">nodes</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>m</strong> (<a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v1.1.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a>) – A matrix to be broadcasted to the network nodes
belonging who are currently members of the Cluster instance.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>An optimization could be made that configures a transition matrix
for the hive, independent of of file names, i.e., turn cluster
groups into groups persisting multiple files instead of only one,
thus reducing simulation spaceoverheads and in real-life
scenarios, decreasing the load done to metadata servers, through
queries and matrix calculations. For simplicity of implementation
each cluster only manages one file.</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="app.domain.cluster_groups.HiveCluster.create_and_bcast_new_transition_matrix">
<code class="sig-name descname">create_and_bcast_new_transition_matrix</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/cluster_groups.html#HiveCluster.create_and_bcast_new_transition_matrix"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Helper method that attempts to generate a markov matrix to be
sliced and distributed to the <code class="docutils literal notranslate"><span class="pre">HiveCluster</span></code>
<a class="reference internal" href="#app.domain.cluster_groups.Cluster.members" title="app.domain.cluster_groups.Cluster.members"><code class="xref py py-attr docutils literal notranslate"><span class="pre">members</span></code></a>.</p>
<p>At most three transition matrices will be generated. The first to be
successfully <a class="reference internal" href="#app.domain.cluster_groups.HiveCluster._validate_transition_matrix" title="app.domain.cluster_groups.HiveCluster._validate_transition_matrix"><code class="xref py py-meth docutils literal notranslate"><span class="pre">validated</span></code></a> is
distributed to the <a class="reference internal" href="#app.domain.network_nodes.HiveNode" title="app.domain.network_nodes.HiveNode"><code class="xref py py-class docutils literal notranslate"><span class="pre">network</span> <span class="pre">nodes</span></code></a>. If all matrices are invalid,
the last matrix will be used to prevent infinite loops in the
simulation. This is not an issue as eventually the membership of the
<code class="docutils literal notranslate"><span class="pre">HiveCluster</span></code> will change, thus, more opportunities to perform a
correct swarm guidance behavior will be possible.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.cluster_groups.HiveCluster.equal_distributions">
<code class="sig-name descname">equal_distributions</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/cluster_groups.html#HiveCluster.equal_distributions"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Asserts if the <a class="reference internal" href="#app.domain.cluster_groups.HiveCluster.v_" title="app.domain.cluster_groups.HiveCluster.v_"><code class="xref py py-attr docutils literal notranslate"><span class="pre">desired</span> <span class="pre">distribution</span></code></a> and
<a class="reference internal" href="#app.domain.cluster_groups.HiveCluster.cv_" title="app.domain.cluster_groups.HiveCluster.cv_"><code class="xref py py-attr docutils literal notranslate"><span class="pre">current</span> <span class="pre">distribution</span></code></a> are equal.</p>
<p>Equalility is calculated using numpy allclose function which has the
following formula:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>absolute(`a` - `b`) &lt;= (`atol` + `rtol` * absolute(`b`))
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> if distributions are close enough to be considered equal,
otherwise, it returns <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.cluster_groups.HiveCluster.evaluate">
<code class="sig-name descname">evaluate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/cluster_groups.html#HiveCluster.evaluate"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Evaluates and logs the health, possibly other parameters, of the
<code class="docutils literal notranslate"><span class="pre">Cluster</span></code> at every epoch.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.cluster_groups.HiveCluster.maintain">
<code class="sig-name descname">maintain</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">off_nodes</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/cluster_groups.html#HiveCluster.maintain"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Evicts disconnected <code class="xref py py-attr docutils literal notranslate"><span class="pre">members</span></code> from the <code class="docutils literal notranslate"><span class="pre">Cluster</span></code> and
attempts to recruit new ones.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>off_nodes</strong> (<em>List</em><em>[</em><em>th.NodeType</em><em>]</em>) – The subset of <code class="xref py py-attr docutils literal notranslate"><span class="pre">members</span></code> who disconnected during the
current epoch.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.cluster_groups.HiveCluster.membership_maintenance">
<code class="sig-name descname">membership_maintenance</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/cluster_groups.html#HiveCluster.membership_maintenance"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Attempts to recruits new
<a class="reference internal" href="#app.domain.network_nodes.HiveNode" title="app.domain.network_nodes.HiveNode"><code class="xref py py-class docutils literal notranslate"><span class="pre">network</span> <span class="pre">nodes</span></code></a> as members
of the <code class="docutils literal notranslate"><span class="pre">HiveCluster</span></code>.</p>
<dl>
<dt>Extends:</dt><dd><p><a class="reference internal" href="#app.domain.cluster_groups.Cluster.membership_maintenance" title="app.domain.cluster_groups.Cluster.membership_maintenance"><code class="xref py py-meth docutils literal notranslate"><span class="pre">app.domain.cluster_groups.Cluster.membership_maintenance()</span></code></a>.</p>
<p><code class="docutils literal notranslate"><span class="pre">HiveCluster.membership_maintenance</span></code> adds and removes cloud
references depending depending on the length of <a class="reference internal" href="#app.domain.cluster_groups.Cluster.members" title="app.domain.cluster_groups.Cluster.members"><code class="xref py py-attr docutils literal notranslate"><span class="pre">members</span></code></a>
before maintenance is performed.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A dictionary that is empty if membership did not change.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>th.NodeDict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.cluster_groups.HiveCluster.new_desired_distribution">
<code class="sig-name descname">new_desired_distribution</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">member_ids</span></em>, <em class="sig-param"><span class="n">member_uptimes</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/cluster_groups.html#HiveCluster.new_desired_distribution"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Sets a new <a class="reference internal" href="#app.domain.cluster_groups.HiveCluster.v_" title="app.domain.cluster_groups.HiveCluster.v_"><code class="xref py py-attr docutils literal notranslate"><span class="pre">desired</span> <span class="pre">distribution</span></code></a> for the
<code class="docutils literal notranslate"><span class="pre">HiveCluster</span></code>.</p>
<p>Received <code class="docutils literal notranslate"><span class="pre">member_uptimes</span></code> are normalized to create a stochastic
representation of the desired distribution, which can be used by the
different transition matrix generation strategies.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>member_ids</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>) – A list of <a class="reference internal" href="#app.domain.network_nodes.Node.id" title="app.domain.network_nodes.Node.id"><code class="xref py py-attr docutils literal notranslate"><span class="pre">node</span> <span class="pre">identifiers</span></code></a> who are
<a class="reference internal" href="#app.domain.cluster_groups.Cluster.members" title="app.domain.cluster_groups.Cluster.members"><code class="xref py py-attr docutils literal notranslate"><span class="pre">members</span></code></a> of the <code class="docutils literal notranslate"><span class="pre">HiveCluster</span></code>.</p></li>
<li><p><strong>member_uptimes</strong> (<em>List</em><em>[</em><em>float</em><em>]</em>) – A list of <a class="reference internal" href="#app.domain.network_nodes.Node.uptime" title="app.domain.network_nodes.Node.uptime"><code class="xref py py-attr docutils literal notranslate"><span class="pre">node</span> <span class="pre">identifiers</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>List[float]</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">member_ids</span></code> and <code class="docutils literal notranslate"><span class="pre">member_uptimes</span></code> elements at each index should
belong to each other, i.e., they should originate from from the
same <a class="reference internal" href="#app.domain.network_nodes.HiveNode" title="app.domain.network_nodes.HiveNode"><code class="xref py py-class docutils literal notranslate"><span class="pre">network</span> <span class="pre">node</span></code></a>.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A list of floats with normalized uptimes which represent the
“reliability” of network nodes.</p>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>member_ids</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>) – </p></li>
<li><p><strong>member_uptimes</strong> (<em>List</em><em>[</em><em>float</em><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>List[float]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.cluster_groups.HiveCluster.new_transition_matrix">
<code class="sig-name descname">new_transition_matrix</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/cluster_groups.html#HiveCluster.new_transition_matrix"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Creates a new transition matrix that is likely to be a Markov Matrix.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The labeled matrix that has the fastests mixing rate from all
the pondered strategies.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v1.1.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.cluster_groups.HiveCluster.nodes_execute">
<code class="sig-name descname">nodes_execute</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/cluster_groups.html#HiveCluster.nodes_execute"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Queries all network node members execute the epoch.</p>
<dl class="simple">
<dt>Overrides:</dt><dd><p><a class="reference internal" href="#app.domain.cluster_groups.Cluster.nodes_execute" title="app.domain.cluster_groups.Cluster.nodes_execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">app.domain.cluster_groups.Cluster.nodes_execute()</span></code></a>.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A collection of members who disconnected during the current
epoch. See
<a class="reference internal" href="#app.domain.network_nodes.Node.get_status" title="app.domain.network_nodes.Node.get_status"><code class="xref py py-meth docutils literal notranslate"><span class="pre">app.domain.network_nodes.Node.get_status()</span></code></a>.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>List[th.NodeType]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.cluster_groups.HiveCluster.remove_cloud_reference">
<code class="sig-name descname">remove_cloud_reference</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/cluster_groups.html#HiveCluster.remove_cloud_reference"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Remove cloud references and delete files within it</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method is virtual.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.cluster_groups.HiveCluster.select_fastest_topology">
<code class="sig-name descname">select_fastest_topology</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">a</span></em>, <em class="sig-param"><span class="n">v_</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/cluster_groups.html#HiveCluster.select_fastest_topology"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Creates multiple transition matrices and selects the fastest.</p>
<p>The fastest of the created transition matrices corresponds to the one
with a faster mixing rate.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> (<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.19)"><em>numpy.ndarray</em></a>) – An adjacency matrix that represents the network topology.</p></li>
<li><p><strong>v_</strong> (<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.19)"><em>numpy.ndarray</em></a>) – A desired distribution vector that defines the returned
matrix steady state property.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A transition matrix that is likely to be a markov matrix whose
steady state is <code class="docutils literal notranslate"><span class="pre">v_</span></code>, but is not yet validated. See
<a class="reference internal" href="#app.domain.cluster_groups.HiveCluster._validate_transition_matrix" title="app.domain.cluster_groups.HiveCluster._validate_transition_matrix"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_validate_transition_matrix()</span></code></a>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.19)">numpy.ndarray</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.cluster_groups.HiveCluster.spread_files">
<code class="sig-name descname">spread_files</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">replicas</span></em>, <em class="sig-param"><span class="n">strat</span><span class="o">=</span><span class="default_value">'i'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/cluster_groups.html#HiveCluster.spread_files"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Distributes a collection of
<a class="reference internal" href="app.domain.helpers.html#app.domain.helpers.smart_dataclasses.FileBlockData" title="app.domain.helpers.smart_dataclasses.FileBlockData"><code class="xref py py-class docutils literal notranslate"><span class="pre">FileBlockData</span></code></a>
objects among the <a class="reference internal" href="#app.domain.cluster_groups.Cluster.members" title="app.domain.cluster_groups.Cluster.members"><code class="xref py py-attr docutils literal notranslate"><span class="pre">members</span></code></a> of the <code class="docutils literal notranslate"><span class="pre">HiveCluster</span></code>.</p>
<dl class="simple">
<dt>Overrides:</dt><dd><p><a class="reference internal" href="#app.domain.cluster_groups.Cluster.spread_files" title="app.domain.cluster_groups.Cluster.spread_files"><code class="xref py py-meth docutils literal notranslate"><span class="pre">app.domain.cluster_groups.Cluster.spread_files()</span></code></a>.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>replicas</strong> (<em>th.ReplicasDict</em>) – The <a class="reference internal" href="app.domain.helpers.html#app.domain.helpers.smart_dataclasses.FileBlockData" title="app.domain.helpers.smart_dataclasses.FileBlockData"><code class="xref py py-class docutils literal notranslate"><span class="pre">FileBlockData</span></code></a>
replicas, without replication.</p></li>
<li><p><strong>strat</strong> (<em>str</em>) – <p>Defines how <code class="docutils literal notranslate"><span class="pre">replicas</span></code> will be initially distributed in
the <code class="docutils literal notranslate"><span class="pre">Cluster</span></code>.</p>
<dl class="simple">
<dt>u</dt><dd><p>Distributed uniformly across network.</p>
</dd>
<dt>a</dt><dd><p>Give all file block replicas to N different members,
where N is equal to
<a class="reference internal" href="app.html#app.environment_settings.REPLICATION_LEVEL" title="app.environment_settings.REPLICATION_LEVEL"><code class="xref py py-const docutils literal notranslate"><span class="pre">REPLICATION_LEVEL</span></code></a>.</p>
</dd>
<dt>i</dt><dd><p>Distribute all file block replicas following such
that the simulation starts with all file replicas and
their replicas distributed with a bias towards the
ideal steady state distribution. This mode is only
applicatable to clusters of type or with ancestor type
<a class="reference internal" href="#app.domain.cluster_groups.HiveCluster" title="app.domain.cluster_groups.HiveCluster"><code class="xref py py-class docutils literal notranslate"><span class="pre">HiveCluster</span></code></a>.</p>
</dd>
</dl>
</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="app.domain.cluster_groups.HiveClusterExt">
<em class="property">class </em><code class="sig-name descname">HiveClusterExt</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">master</span></em>, <em class="sig-param"><span class="n">file_name</span></em>, <em class="sig-param"><span class="n">members</span></em>, <em class="sig-param"><span class="n">sim_id</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">origin</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/cluster_groups.html#HiveClusterExt"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Bases: <a class="reference internal" href="#app.domain.cluster_groups.HiveCluster" title="app.domain.cluster_groups.HiveCluster"><code class="xref py py-class docutils literal notranslate"><span class="pre">app.domain.cluster_groups.HiveCluster</span></code></a></p>
<p>Represents a group of network nodes persisting a file.</p>
<p><code class="docutils literal notranslate"><span class="pre">HiveClusterExt</span></code> instances differ from
<a class="reference internal" href="#app.domain.cluster_groups.HiveCluster" title="app.domain.cluster_groups.HiveCluster"><code class="xref py py-class docutils literal notranslate"><span class="pre">HiveCluster</span></code></a> because their members are
of type <a class="reference internal" href="#app.domain.network_nodes.HiveNodeExt" title="app.domain.network_nodes.HiveNodeExt"><code class="xref py py-class docutils literal notranslate"><span class="pre">HiveNodeExt</span></code></a>. When combined
these classes give nodes the responsibility of collaborating in the
detection of faulty members of the <code class="docutils literal notranslate"><span class="pre">HiveClusterExt</span></code> and eventually
kicking them out of the group.</p>
<dl class="py attribute">
<dt id="app.domain.cluster_groups.HiveClusterExt.complaint_threshold">
<code class="sig-name descname">complaint_threshold</code></dt>
<dd><p>Reference value that defines the maximum number of complaints a
<a class="reference internal" href="#app.domain.network_nodes.HiveNodeExt" title="app.domain.network_nodes.HiveNodeExt"><code class="xref py py-class docutils literal notranslate"><span class="pre">network</span> <span class="pre">node</span></code></a>
can receive before it is evicted from the <code class="docutils literal notranslate"><span class="pre">HiveClusterExt</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="app.domain.cluster_groups.HiveClusterExt.nodes_complaints">
<code class="sig-name descname">nodes_complaints</code></dt>
<dd><p>A dictionary mapping <a class="reference internal" href="#app.domain.network_nodes.Node.id" title="app.domain.network_nodes.Node.id"><code class="xref py py-attr docutils literal notranslate"><span class="pre">network</span> <span class="pre">node</span> <span class="pre">identifiers'</span></code></a> to the number of complaints
made against them by other <a class="reference internal" href="#app.domain.cluster_groups.Cluster.members" title="app.domain.cluster_groups.Cluster.members"><code class="xref py py-attr docutils literal notranslate"><span class="pre">members</span></code></a>. When
complaints becomes bigger than py:py:attr:<cite>complaint_threshold</cite>
the complaintee is evicted from the group.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Dict[str, int]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="app.domain.cluster_groups.HiveClusterExt.suspicious_nodes">
<code class="sig-name descname">suspicious_nodes</code></dt>
<dd><p>A dictionary containing the unique <a class="reference internal" href="#app.domain.network_nodes.Node.id" title="app.domain.network_nodes.Node.id"><code class="xref py py-attr docutils literal notranslate"><span class="pre">node</span> <span class="pre">identifiers</span></code></a> of known suspicious
members and how many epochs have passed since they changed to such
status.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Dict[str, int]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="app.domain.cluster_groups.HiveClusterExt._epoch_complaints">
<code class="sig-name descname">_epoch_complaints</code></dt>
<dd><p>A set of unique identifiers formed from the concatenation of
<a class="reference internal" href="#app.domain.network_nodes.Node.id" title="app.domain.network_nodes.Node.id"><code class="xref py py-attr docutils literal notranslate"><span class="pre">node</span> <span class="pre">identifiers</span></code></a>,
to avoid multiple complaint registrations on the same epoch,
done by the same source towards the same target. The set is
reset every epoch.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>set</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.cluster_groups.HiveClusterExt.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">master</span></em>, <em class="sig-param"><span class="n">file_name</span></em>, <em class="sig-param"><span class="n">members</span></em>, <em class="sig-param"><span class="n">sim_id</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">origin</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/cluster_groups.html#HiveClusterExt.__init__"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Instantiates an <code class="docutils literal notranslate"><span class="pre">Cluster</span></code> object</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>master</strong> (<em>th.MasterType</em>) – A reference to an <a class="reference internal" href="#app.domain.master_servers.Master" title="app.domain.master_servers.Master"><code class="xref py py-class docutils literal notranslate"><span class="pre">Master</span></code></a>
object that manages the <code class="docutils literal notranslate"><span class="pre">Cluster</span></code> being initialized.</p></li>
<li><p><strong>file_name</strong> (<em>str</em>) – The name of the file the <code class="docutils literal notranslate"><span class="pre">Cluster</span></code> is responsible for
persisting.</p></li>
<li><p><strong>members</strong> (<em>th.NodeDict</em>) – A dictionary where keys are <a class="reference internal" href="#app.domain.network_nodes.Node.id" title="app.domain.network_nodes.Node.id"><code class="xref py py-attr docutils literal notranslate"><span class="pre">node</span> <span class="pre">identifiers</span></code></a> and values are their
instance objects.</p></li>
<li><p><strong>sim_id</strong> (<em>int</em>) – Identifier that generates unique output file names,
thus guaranteeing that different simulation instances do not
overwrite previous out files.</p></li>
<li><p><strong>origin</strong> (<em>str</em>) – The name of the simulation file name that started
the simulation process.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.cluster_groups.HiveClusterExt.complain">
<code class="sig-name descname">complain</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">complainter</span></em>, <em class="sig-param"><span class="n">complainee</span></em>, <em class="sig-param"><span class="n">reason</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/cluster_groups.html#HiveClusterExt.complain"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Registers a complaint against a possibly offline node.</p>
<p>A unique identifier for the complaint is generated by concatenation
of the complainter and the complainee unique identifiers.</p>
<dl class="simple">
<dt>Overrides:</dt><dd><p><a class="reference internal" href="#app.domain.cluster_groups.Cluster.complain" title="app.domain.cluster_groups.Cluster.complain"><code class="xref py py-meth docutils literal notranslate"><span class="pre">app.domain.cluster_groups.Cluster.complain()</span></code></a></p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>complainter</strong> (<em>str</em>) – The identifier of the complaining
<a class="reference internal" href="#app.domain.network_nodes.HiveNodeExt" title="app.domain.network_nodes.HiveNodeExt"><code class="xref py py-class docutils literal notranslate"><span class="pre">HiveNodeExt</span></code></a>.</p></li>
<li><p><strong>complainee</strong> (<em>str</em>) – The identifier of the
<a class="reference internal" href="#app.domain.network_nodes.HiveNodeExt" title="app.domain.network_nodes.HiveNodeExt"><code class="xref py py-class docutils literal notranslate"><span class="pre">HiveNodeExt</span></code></a>
being complained about.</p></li>
<li><p><strong>reason</strong> (<a class="reference internal" href="app.html#app.type_hints.HttpResponse" title="app.type_hints.HttpResponse"><code class="xref py py-data docutils literal notranslate"><span class="pre">app.type_hints.HttpResponse</span></code></a>) – The <a class="reference internal" href="app.domain.helpers.html#app.domain.helpers.enums.HttpCodes" title="app.domain.helpers.enums.HttpCodes"><code class="xref py py-class docutils literal notranslate"><span class="pre">http</span> <span class="pre">code</span></code></a>
that led to the complaint.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.cluster_groups.HiveClusterExt.execute_epoch">
<code class="sig-name descname">execute_epoch</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">epoch</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/cluster_groups.html#HiveClusterExt.execute_epoch"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Orders all <code class="xref py py-attr docutils literal notranslate"><span class="pre">members</span></code> to execute their epoch.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the <code class="docutils literal notranslate"><span class="pre">Cluster</span></code> terminates early, before it reaches
<a class="reference internal" href="#app.domain.master_servers.Master.MAX_EPOCHS" title="app.domain.master_servers.Master.MAX_EPOCHS"><code class="xref py py-const docutils literal notranslate"><span class="pre">MAX_EPOCHS</span></code></a>,
nothing should be logged in
<a class="reference internal" href="app.domain.helpers.html#app.domain.helpers.smart_dataclasses.LoggingData" title="app.domain.helpers.smart_dataclasses.LoggingData"><code class="xref py py-class docutils literal notranslate"><span class="pre">LoggingData</span></code></a>
at the specified <code class="docutils literal notranslate"><span class="pre">epoch</span></code> to avoid skewing previously
collected results.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>epoch</strong> (<em>int</em>) – The epoch the <code class="docutils literal notranslate"><span class="pre">Cluster</span></code> should currently be in, according
to it’s managing <code class="xref py py-attr docutils literal notranslate"><span class="pre">master</span></code> entity.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">False</span></code> if <code class="docutils literal notranslate"><span class="pre">Cluster</span></code> failed to persist the <code class="xref py py-attr docutils literal notranslate"><span class="pre">file</span></code> it was
responsible for, otherwise <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.cluster_groups.HiveClusterExt.maintain">
<code class="sig-name descname">maintain</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">off_nodes</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/cluster_groups.html#HiveClusterExt.maintain"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Evicts any <a class="reference internal" href="#app.domain.network_nodes.HiveNodeExt" title="app.domain.network_nodes.HiveNodeExt"><code class="xref py py-class docutils literal notranslate"><span class="pre">network</span> <span class="pre">node</span></code></a> who has
been complained about more than <a class="reference internal" href="#app.domain.cluster_groups.HiveClusterExt.complaint_threshold" title="app.domain.cluster_groups.HiveClusterExt.complaint_threshold"><code class="xref py py-attr docutils literal notranslate"><span class="pre">complaint_threshold</span></code></a> times.</p>
<dl class="simple">
<dt>Overrides:</dt><dd><p><a class="reference internal" href="#app.domain.cluster_groups.Cluster.maintain" title="app.domain.cluster_groups.Cluster.maintain"><code class="xref py py-meth docutils literal notranslate"><span class="pre">app.domain.cluster_groups.Cluster.maintain()</span></code></a>.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>off_nodes</strong> (<em>List</em><em>[</em><em>th.NodeType</em><em>]</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.cluster_groups.HiveClusterExt.nodes_execute">
<code class="sig-name descname">nodes_execute</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/cluster_groups.html#HiveClusterExt.nodes_execute"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Queries all network node members execute the epoch.</p>
<dl>
<dt>Overrides:</dt><dd><p><a class="reference internal" href="#app.domain.cluster_groups.HiveCluster.nodes_execute" title="app.domain.cluster_groups.HiveCluster.nodes_execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">app.domain.cluster_groups.HiveCluster.nodes_execute()</span></code></a>.</p>
<p>Offline <a class="reference internal" href="#app.domain.network_nodes.HiveNodeExt" title="app.domain.network_nodes.HiveNodeExt"><code class="xref py py-class docutils literal notranslate"><span class="pre">network</span> <span class="pre">nodes</span></code></a>
are considered suspects until enough complaints
from other <code class="docutils literal notranslate"><span class="pre">HiveNodeExt</span></code> <a class="reference internal" href="#app.domain.cluster_groups.Cluster.members" title="app.domain.cluster_groups.Cluster.members"><code class="xref py py-attr docutils literal notranslate"><span class="pre">members</span></code></a> are received.
This is important because lost parts can not be logged multiple
times. Yet suspected <a class="reference internal" href="#app.domain.network_nodes.HiveNodeExt" title="app.domain.network_nodes.HiveNodeExt"><code class="xref py py-class docutils literal notranslate"><span class="pre">network</span> <span class="pre">nodes</span></code></a> need to be contabilized
as offline for simulation purposes without being evicted from the
group until they are detected by their peers as being offline.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A collection of <a class="reference internal" href="#app.domain.cluster_groups.Cluster.members" title="app.domain.cluster_groups.Cluster.members"><code class="xref py py-attr docutils literal notranslate"><span class="pre">members</span></code></a> who disconnected
during the current epoch.
See <a class="reference internal" href="#app.domain.network_nodes.HiveNodeExt.get_status" title="app.domain.network_nodes.HiveNodeExt.get_status"><code class="xref py py-meth docutils literal notranslate"><span class="pre">app.domain.network_nodes.HiveNodeExt.get_status()</span></code></a>.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>List[th.NodeType]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-app.domain.master_servers">
<span id="app-domain-master-servers"></span><h2>app.domain.master_servers</h2>
<p>This module contains domain specific classes that coordinate all
<code class="xref py py-mod docutils literal notranslate"><span class="pre">domain.cluster_groups</span></code> of a simulation instance.</p>
<dl class="py class">
<dt id="app.domain.master_servers.HDFSMaster">
<em class="property">class </em><code class="sig-name descname">HDFSMaster</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">simfile_name</span></em>, <em class="sig-param"><span class="n">sid</span></em>, <em class="sig-param"><span class="n">epochs</span></em>, <em class="sig-param"><span class="n">cluster_class</span></em>, <em class="sig-param"><span class="n">node_class</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/master_servers.html#HDFSMaster"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Bases: <a class="reference internal" href="#app.domain.master_servers.Master" title="app.domain.master_servers.Master"><code class="xref py py-class docutils literal notranslate"><span class="pre">app.domain.master_servers.Master</span></code></a></p>
<dl class="py method">
<dt id="app.domain.master_servers.HDFSMaster.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">simfile_name</span></em>, <em class="sig-param"><span class="n">sid</span></em>, <em class="sig-param"><span class="n">epochs</span></em>, <em class="sig-param"><span class="n">cluster_class</span></em>, <em class="sig-param"><span class="n">node_class</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/master_servers.html#HDFSMaster.__init__"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Instantiates an Master object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>simfile_name</strong> (<em>str</em>) – A path to the simulation file to be run by the simulator.</p></li>
<li><p><strong>sid</strong> (<em>int</em>) – Identifier that generates unique output file names,
thus guaranteeing that different simulation instances do not
overwrite previous out files.</p></li>
<li><p><strong>epochs</strong> (<em>int</em>) – The number of discrete time steps the simulation lasts.</p></li>
<li><p><strong>cluster_class</strong> (<em>str</em>) – The name of the class used to instantiate cluster group
instances through reflection. See <code class="xref py py-mod docutils literal notranslate"><span class="pre">Cluster</span> <span class="pre">Group</span></code>.</p></li>
<li><p><strong>node_class</strong> (<em>str</em>) – The name of the class used to instantiate network node
instances through reflection. See <code class="xref py py-mod docutils literal notranslate"><span class="pre">Network</span> <span class="pre">Node</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.master_servers.HDFSMaster.__process_simfile__">
<code class="sig-name descname">__process_simfile__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">cluster_class</span></em>, <em class="sig-param"><span class="n">node_class</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/master_servers.html#HDFSMaster.__process_simfile__"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Opens and processes the simulation filed referenced in <cite>path</cite>.</p>
<dl>
<dt>Overrides:</dt><dd><p>py:mod:<cite>app.domain.master_servers.Master.__process_simfile__</cite>. The
method is exactly the same except for one instruction. The
<a class="reference internal" href="#app.domain.master_servers.Master.__split_files__" title="app.domain.master_servers.Master.__split_files__"><code class="xref py py-mod docutils literal notranslate"><span class="pre">app.domain.master_servers.Master.__split_files__</span></code></a> is
invoked with fixed <cite>bsize</cite> = 1MB. The reason for this is twofold:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>- The default and, thus recommended, block/chunk size for the
hadoop distributed file system is 128MB. The system is not
designed to perform well with small file blocks, but Hives
requires many file blocks for stochastic swarm guidance to
work, hence being more effective with small block sizes. By
default Hives runs with 128KB blocks.
- Hadoop limits the minimum block size to be 1MB,
`dfs.namenode.fs-limits.min-block-size
&lt;https://hadoop.apache.org/docs/r2.6.0/hadoop-project-dist/hadoop-hdfs/hdfs-default.xml#dfs.namenode.fs-limits.min-block-size&gt;`.
For this reason, we make HDFSMaster split files into 1MB chunks,
as that is the closest we would get to our Hive&#39;s default
block size in the real wourld
</pre></div>
</div>
<p>The other difference, is that spread strategy is ignored as we
are not interested in knowing if the way the files are initially
spread affect the time the time it takes for hives to achieve a
steady state distribution, since in HDFS file block replicas are
stationary on data nodes until they die.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em>) – </p></li>
<li><p><strong>cluster_class</strong> (<em>str</em>) – </p></li>
<li><p><strong>node_class</strong> (<em>str</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="app.domain.master_servers.HiveMaster">
<em class="property">class </em><code class="sig-name descname">HiveMaster</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">simfile_name</span></em>, <em class="sig-param"><span class="n">sid</span></em>, <em class="sig-param"><span class="n">epochs</span></em>, <em class="sig-param"><span class="n">cluster_class</span></em>, <em class="sig-param"><span class="n">node_class</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/master_servers.html#HiveMaster"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Bases: <a class="reference internal" href="#app.domain.master_servers.Master" title="app.domain.master_servers.Master"><code class="xref py py-class docutils literal notranslate"><span class="pre">app.domain.master_servers.Master</span></code></a></p>
<dl class="py method">
<dt id="app.domain.master_servers.HiveMaster.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">simfile_name</span></em>, <em class="sig-param"><span class="n">sid</span></em>, <em class="sig-param"><span class="n">epochs</span></em>, <em class="sig-param"><span class="n">cluster_class</span></em>, <em class="sig-param"><span class="n">node_class</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/master_servers.html#HiveMaster.__init__"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Instantiates an Master object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>simfile_name</strong> (<em>str</em>) – A path to the simulation file to be run by the simulator.</p></li>
<li><p><strong>sid</strong> (<em>int</em>) – Identifier that generates unique output file names,
thus guaranteeing that different simulation instances do not
overwrite previous out files.</p></li>
<li><p><strong>epochs</strong> (<em>int</em>) – The number of discrete time steps the simulation lasts.</p></li>
<li><p><strong>cluster_class</strong> (<em>str</em>) – The name of the class used to instantiate cluster group
instances through reflection. See <code class="xref py py-mod docutils literal notranslate"><span class="pre">Cluster</span> <span class="pre">Group</span></code>.</p></li>
<li><p><strong>node_class</strong> (<em>str</em>) – The name of the class used to instantiate network node
instances through reflection. See <code class="xref py py-mod docutils literal notranslate"><span class="pre">Network</span> <span class="pre">Node</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.master_servers.HiveMaster.get_cloud_reference">
<code class="sig-name descname">get_cloud_reference</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/master_servers.html#HiveMaster.get_cloud_reference"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Use to obtain a reference to 3rd party cloud storage provider</p>
<p>The cloud storage provider can be used to temporarely host files
belonging to Hives in bad status, thus increasing file durability
in the system.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method is virtual.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A pointer to thhe cloud server, e.g., an IP Address.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="app.domain.master_servers.Master">
<em class="property">class </em><code class="sig-name descname">Master</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">simfile_name</span></em>, <em class="sig-param"><span class="n">sid</span></em>, <em class="sig-param"><span class="n">epochs</span></em>, <em class="sig-param"><span class="n">cluster_class</span></em>, <em class="sig-param"><span class="n">node_class</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/master_servers.html#Master"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Simulation manager class. Plays the role of a master server for all
Hives of the distributed backup system.</p>
<dl class="py attribute">
<dt id="app.domain.master_servers.Master.origin">
<code class="sig-name descname">origin</code></dt>
<dd><p>The name of the simulation file name that started the simulation
process.</p>
</dd></dl>

<dl class="py attribute">
<dt id="app.domain.master_servers.Master.sid">
<code class="sig-name descname">sid</code></dt>
<dd><p>Identifier that generates unique output file names,
thus guaranteeing that different simulation instances do not
overwrite previous out files.</p>
</dd></dl>

<dl class="py attribute">
<dt id="app.domain.master_servers.Master.epoch">
<code class="sig-name descname">epoch</code></dt>
<dd><p>The simulation’s current epoch.</p>
</dd></dl>

<dl class="py attribute">
<dt id="app.domain.master_servers.Master.cluster_groups">
<code class="sig-name descname">cluster_groups</code></dt>
<dd><p>A collection of <code class="xref py py-class docutils literal notranslate"><span class="pre">domain.cluster_groups.Cluster</span></code>
instances managed by the Master.</p>
</dd></dl>

<dl class="py attribute">
<dt id="app.domain.master_servers.Master.network_nodes">
<code class="sig-name descname">network_nodes</code></dt>
<dd><p>A dictionary mapping network node identifiers names to their
object instances (<code class="xref py py-class docutils literal notranslate"><span class="pre">domain.network_nodes.HiveNode</span></code>).
This collection differs from the
<a class="reference internal" href="#app.domain.cluster_groups.Cluster" title="app.domain.cluster_groups.Cluster"><code class="xref py py-class docutils literal notranslate"><span class="pre">Cluster's</span></code></a> attribute
<a class="reference internal" href="#app.domain.cluster_groups.Cluster.members" title="app.domain.cluster_groups.Cluster.members"><code class="xref py py-attr docutils literal notranslate"><span class="pre">members</span></code></a> in the sense
that the latter is only a subset of <cite>workers</cite>, which includes all
network nodes of the distributed backup system, regardless of
their participation on any Cluster.</p>
</dd></dl>

<dl class="py method">
<dt id="app.domain.master_servers.Master.__create_network_nodes__">
<code class="sig-name descname">__create_network_nodes__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">json</span></em>, <em class="sig-param"><span class="n">node_class</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/master_servers.html#Master.__create_network_nodes__"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Helper method that instantiates all
<a class="reference internal" href="#app.domain.network_nodes.Node" title="app.domain.network_nodes.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">Network</span> <span class="pre">Nodes</span></code></a> that are
specified in the simulation file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>json</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – The simulation file in JSON dictionary object format.</p></li>
<li><p><strong>node_class</strong> (<em>str</em>) – The type of network node to create.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.master_servers.Master.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">simfile_name</span></em>, <em class="sig-param"><span class="n">sid</span></em>, <em class="sig-param"><span class="n">epochs</span></em>, <em class="sig-param"><span class="n">cluster_class</span></em>, <em class="sig-param"><span class="n">node_class</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/master_servers.html#Master.__init__"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Instantiates an Master object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>simfile_name</strong> (<em>str</em>) – A path to the simulation file to be run by the simulator.</p></li>
<li><p><strong>sid</strong> (<em>int</em>) – Identifier that generates unique output file names,
thus guaranteeing that different simulation instances do not
overwrite previous out files.</p></li>
<li><p><strong>epochs</strong> (<em>int</em>) – The number of discrete time steps the simulation lasts.</p></li>
<li><p><strong>cluster_class</strong> (<em>str</em>) – The name of the class used to instantiate cluster group
instances through reflection. See <code class="xref py py-mod docutils literal notranslate"><span class="pre">Cluster</span> <span class="pre">Group</span></code>.</p></li>
<li><p><strong>node_class</strong> (<em>str</em>) – The name of the class used to instantiate network node
instances through reflection. See <code class="xref py py-mod docutils literal notranslate"><span class="pre">Network</span> <span class="pre">Node</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.master_servers.Master.__new_cluster_group__">
<code class="sig-name descname">__new_cluster_group__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cluster_class</span></em>, <em class="sig-param"><span class="n">size</span></em>, <em class="sig-param"><span class="n">fname</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/master_servers.html#Master.__new_cluster_group__"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Helper method that initializes a new Cluster group.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cluster_class</strong> (<em>str</em>) – The name of the class used to instantiate cluster group
instances through reflection. See <code class="xref py py-mod docutils literal notranslate"><span class="pre">Cluster</span> <span class="pre">Group</span></code>.</p></li>
<li><p><strong>size</strong> (<em>int</em>) – The <a class="reference internal" href="#app.domain.cluster_groups.Cluster" title="app.domain.cluster_groups.Cluster"><code class="xref py py-class docutils literal notranslate"><span class="pre">Cluster's</span></code></a>
initial member size.</p></li>
<li><p><strong>fname</strong> (<em>str</em>) – The name of the fille being stored in the cluster.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The <a class="reference internal" href="#app.domain.cluster_groups.Cluster" title="app.domain.cluster_groups.Cluster"><code class="xref py py-class docutils literal notranslate"><span class="pre">Cluster</span></code></a> instance.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>th.ClusterType</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.master_servers.Master.__new_network_node__">
<code class="sig-name descname">__new_network_node__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">node_class</span></em>, <em class="sig-param"><span class="n">nid</span></em>, <em class="sig-param"><span class="n">node_uptime</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/master_servers.html#Master.__new_network_node__"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Helper method that initializes a new Node.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node_class</strong> (<em>str</em>) – The name of the class used to instantiate network node
instances through reflection. See <code class="xref py py-mod docutils literal notranslate"><span class="pre">Network</span> <span class="pre">Node</span></code>.</p></li>
<li><p><strong>nid</strong> (<em>str</em>) – An id that will uniquely identifies the network node.</p></li>
<li><p><strong>node_uptime</strong> (<em>str</em>) – A float value in string representation that defines the
uptime of the network node.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The <a class="reference internal" href="#app.domain.network_nodes.Node" title="app.domain.network_nodes.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">app.domain.network_nodes.Node</span></code></a> instance.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>th.NodeType</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.master_servers.Master.__process_simfile__">
<code class="sig-name descname">__process_simfile__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">cluster_class</span></em>, <em class="sig-param"><span class="n">node_class</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/master_servers.html#Master.__process_simfile__"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Opens and processes the simulation filed referenced in <cite>path</cite>.</p>
<p>This method opens the file reads the json data inside it and combined
with <code class="xref py py-mod docutils literal notranslate"><span class="pre">environment_settings</span></code>, sets up the class instances to
be used during the simulation (e.g., <code class="xref py py-class docutils literal notranslate"><span class="pre">Clusters</span></code> and <code class="xref py py-class docutils literal notranslate"><span class="pre">Nodes</span></code>). This method should also be responsible
for splitting the file into multiple chunks/blocks/parts and
distributing them over the initial clusters’
<code class="xref py py-attr docutils literal notranslate"><span class="pre">domain.cluster_groups.Cluster.members</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em>) – The path to the simulation file. Including extension and
parent folders.</p></li>
<li><p><strong>cluster_class</strong> (<em>str</em>) – The name of the class used to instantiate cluster group
instances through reflection. See <code class="xref py py-mod docutils literal notranslate"><span class="pre">Cluster</span> <span class="pre">Group</span></code>.</p></li>
<li><p><strong>node_class</strong> (<em>str</em>) – The name of the class used to instantiate network node
instances through reflection. See <code class="xref py py-mod docutils literal notranslate"><span class="pre">Network</span> <span class="pre">Node</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.master_servers.Master.__split_files__">
<code class="sig-name descname">__split_files__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fname</span></em>, <em class="sig-param"><span class="n">cluster</span></em>, <em class="sig-param"><span class="n">bsize</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/master_servers.html#Master.__split_files__"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Helper method that splits the files into multiple blocks to be
persisted in a <code class="xref py py-class docutils literal notranslate"><span class="pre">domain.cluster_group.Cluster</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fname</strong> (<em>str</em>) – The name of the file located in
<code class="xref py py-const docutils literal notranslate"><span class="pre">environment_settings.SHARED_ROOT</span></code> folder to be
read and splitted.</p></li>
<li><p><strong>bsize</strong> (<em>int</em>) – The maximum amount of bytes each file block can have.</p></li>
<li><p><strong>cluster</strong> (<em>th.ClusterType</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>th.ReplicasDict</p>
</dd>
</dl>
<p>Returns:</p>
</dd></dl>

<dl class="py method">
<dt id="app.domain.master_servers.Master.execute_simulation">
<code class="sig-name descname">execute_simulation</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/master_servers.html#Master.execute_simulation"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Runs a stochastic swarm guidance algorithm applied
to a P2P network.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.master_servers.Master.find_replacement_node">
<code class="sig-name descname">find_replacement_node</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">exclusion_dict</span></em>, <em class="sig-param"><span class="n">n</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/master_servers.html#Master.find_replacement_node"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Finds a collection of online network nodes that can be used to
replace offline ones in an Cluster.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>exclusion_dict</strong> (<em>th.NodeDict</em>) – A dictionary of network nodes identifiers and their object
instances (<a class="reference internal" href="#app.domain.network_nodes.HiveNode" title="app.domain.network_nodes.HiveNode"><code class="xref py py-class docutils literal notranslate"><span class="pre">app.domain.network_nodes.HiveNode</span></code></a>),
which represent the nodes the Cluster is not interested in,
i.e., this argument is a blacklist.</p></li>
<li><p><strong>n</strong> (<em>int</em>) – How many replacements the calling Cluster desires to find.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A collection of replacements which is smaller or equal than <cite>n</cite>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>th.NodeDict</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="app.domain.master_servers.Master.MAX_EPOCHS">
<code class="sig-name descname">MAX_EPOCHS</code><em class="property">: Optional<span class="p">[</span>int<span class="p">]</span></em><em class="property"> = None</em></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="app.domain.master_servers.Master.MAX_EPOCHS_PLUS_ONE">
<code class="sig-name descname">MAX_EPOCHS_PLUS_ONE</code><em class="property">: Optional<span class="p">[</span>int<span class="p">]</span></em><em class="property"> = None</em></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py data">
<dt id="app.domain.master_servers._PersistentingDict">
<code class="sig-name descname">_PersistentingDict</code><em class="property">: Dict<span class="p">[</span>str<span class="p">, </span>Dict<span class="p">[</span>str<span class="p">, </span>Union<span class="p">[</span>List<span class="p">[</span>str<span class="p">]</span><span class="p">, </span>str<span class="p">]</span><span class="p">]</span><span class="p">]</span></em></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-app.domain.network_nodes">
<span id="app-domain-network-nodes"></span><h2>app.domain.network_nodes</h2>
<p>This module contains domain specific classes that represent network nodes
responsible for the storage of file blocks. These could be reliable servers
or P2P nodes.</p>
<dl class="py class">
<dt id="app.domain.network_nodes.HDFSNode">
<em class="property">class </em><code class="sig-name descname">HDFSNode</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">uid</span></em>, <em class="sig-param"><span class="n">uptime</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/network_nodes.html#HDFSNode"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Bases: <a class="reference internal" href="#app.domain.network_nodes.Node" title="app.domain.network_nodes.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">app.domain.network_nodes.Node</span></code></a></p>
<p>Represents a data node in the Hadoop Distribute File System.</p>
<dl class="py method">
<dt id="app.domain.network_nodes.HDFSNode.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">uid</span></em>, <em class="sig-param"><span class="n">uptime</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/network_nodes.html#HDFSNode.__init__"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Instantiates a HDFSNode object.</p>
<p>These represent hadoop distributed file system data nodes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>uid</strong> (<em>str</em>) – An unique identifier for the worker instance.</p></li>
<li><p><strong>uptime</strong> (<em>float</em>) – The availability of the worker instance.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.network_nodes.HDFSNode.execute_epoch">
<code class="sig-name descname">execute_epoch</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cluster</span></em>, <em class="sig-param"><span class="n">fid</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/network_nodes.html#HDFSNode.execute_epoch"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Instructs the Node instance to execute the epoch.</p>
<p>The method iterates all file block blocks in <code class="xref py py-attr docutils literal notranslate"><span class="pre">files</span></code> and
silentry tries to corrupt them. In HDFS files’ Sha256 is only
verified when a user or client accesses the remote replica. Thus,
no recovery epoch is not setted up when a corruption occurs. The
corruption is still logged in the output file.</p>
<dl class="simple">
<dt>Overrides:</dt><dd><p><a class="reference internal" href="#app.domain.network_nodes.Node.execute_epoch" title="app.domain.network_nodes.Node.execute_epoch"><code class="xref py py-meth docutils literal notranslate"><span class="pre">app.domain.network_nodes.Node.execute_epoch()</span></code></a>.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cluster</strong> (<em>th.ClusterType</em>) – Cluster instance that ordered execution of the epoch.</p></li>
<li><p><strong>fid</strong> (<em>str</em>) – The identifier that determines which file blocks
blocks should be routed.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.network_nodes.HDFSNode.get_status">
<code class="sig-name descname">get_status</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/network_nodes.html#HDFSNode.get_status"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Used to obtain the status of the worker.</p>
<dl class="simple">
<dt>Overrides:</dt><dd><p><a class="reference internal" href="#app.domain.network_nodes.Node.get_status" title="app.domain.network_nodes.Node.get_status"><code class="xref py py-meth docutils literal notranslate"><span class="pre">app.domain.network_nodes.Node.get_status()</span></code></a>.
When not ONLINE the node sets itself as Suspect and will only become
offline when the monitor marks him as so (e.g.: due to complaints).</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The status of the worker. See
<a class="reference internal" href="app.domain.helpers.html#app.domain.helpers.enums.Status" title="app.domain.helpers.enums.Status"><code class="xref py py-class docutils literal notranslate"><span class="pre">app.domain.helpers.enums.Status</span></code></a>.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.network_nodes.HDFSNode.replicate_part">
<code class="sig-name descname">replicate_part</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cluster</span></em>, <em class="sig-param"><span class="n">replica</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/network_nodes.html#HDFSNode.replicate_part"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Tries to restore the <cite>replica</cite>’s
<code class="xref py py-const docutils literal notranslate"><span class="pre">REPLICATION_LEVEL</span></code>.</p>
<p>The file block replica is sent selectively in descending order to the
most reliable Nodes in the Cluster down to the least reliable.</p>
<dl class="simple">
<dt>Overrides:</dt><dd><p><a class="reference internal" href="#app.domain.network_nodes.Node.replicate_part" title="app.domain.network_nodes.Node.replicate_part"><code class="xref py py-meth docutils literal notranslate"><span class="pre">app.domain.network_nodes.Node.replicate_part()</span></code></a>.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cluster</strong> (<em>th.ClusterType</em>) – </p></li>
<li><p><strong>replica</strong> (<em>sd.FileBlockData</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="app.domain.network_nodes.HiveNode">
<em class="property">class </em><code class="sig-name descname">HiveNode</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">uid</span></em>, <em class="sig-param"><span class="n">uptime</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/network_nodes.html#HiveNode"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Bases: <a class="reference internal" href="#app.domain.network_nodes.Node" title="app.domain.network_nodes.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">app.domain.network_nodes.Node</span></code></a></p>
<p>Represents a network node that executes a Swarm Guidance algorithm.</p>
<p>Workers work in one or more cluster_groups
(<code class="xref py py-class docutils literal notranslate"><span class="pre">domain.cluster_groups.Cluster</span></code>) to try to ensure the
durability of files belonging to the distributed backup system. Their
route file block blocks to other network_nodes at every epoch
time according to the routing table of the file that block belongs to,
i.e., according to the column vector of the transition matrix that is
generated by
(<code class="xref py py-meth docutils literal notranslate"><span class="pre">domain.cluster_groups.Cluster.new_transition_matrix()</span></code>).
If every worker in the Cluster shares their blocks with other members by
following their respective vector then eventually, the whole
Cluster will reach the desired steady state distribution of file
block blocks (<code class="xref py py-attr docutils literal notranslate"><span class="pre">domain.cluster_groups.Cluster.v_</span></code>).</p>
<dl class="py attribute">
<dt id="app.domain.network_nodes.HiveNode.hives">
<code class="sig-name descname">hives</code></dt>
<dd><p>A collection of <code class="xref py py-class docutils literal notranslate"><span class="pre">domain.cluster_groups.Cluster</span></code> this
HiveNode is a member of.</p>
</dd></dl>

<dl class="py attribute">
<dt id="app.domain.network_nodes.HiveNode.routing_table">
<code class="sig-name descname">routing_table</code></dt>
<dd><p>Contains the information required to appropriately route file
block blocks to other HiveNode instances.</p>
</dd></dl>

<dl class="py method">
<dt id="app.domain.network_nodes.HiveNode.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">uid</span></em>, <em class="sig-param"><span class="n">uptime</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/network_nodes.html#HiveNode.__init__"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Instantiates a HiveNode object.</p>
<p>Workers are the network nodes responsible for persisting file block
blocks.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>uid</strong> (<em>str</em>) – An unique identifier for the worker instance.</p></li>
<li><p><strong>uptime</strong> (<em>float</em>) – The availability of the worker instance.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.network_nodes.HiveNode.execute_epoch">
<code class="sig-name descname">execute_epoch</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cluster</span></em>, <em class="sig-param"><span class="n">fid</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/network_nodes.html#HiveNode.execute_epoch"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Instructs the HiveNode instance to execute the epoch.</p>
<p>The method iterates all file block blocks in <code class="xref py py-attr docutils literal notranslate"><span class="pre">files</span></code> and
independently decides if they should be sent to other HiveNode
instances by following <a class="reference internal" href="#app.domain.network_nodes.HiveNode.routing_table" title="app.domain.network_nodes.HiveNode.routing_table"><code class="xref py py-attr docutils literal notranslate"><span class="pre">routing_table</span></code></a> column vectors.</p>
<p>When a file block is sent to some other HiveNode a reply is
awaited. In real world environments this should be assynchronous,
but for simulation purposes it’s synchronous and instantaneous. When the
destination replies with OK, meaning it accepted the replica,
this HiveNode instance deletes the replica from his disk. If it
replies with a BAD_REQUEST the replica is discarded and the worker
starts a recovery process in the Cluster. Any other code response
results in the HiveNode instance keeping replica in his disk
for at least one more epoch times. See
<code class="xref py py-class docutils literal notranslate"><span class="pre">domain.helpers.enums.HttpCodes</span></code> for more information on
possible HTTP Codes.</p>
<dl class="simple">
<dt>Overrides:</dt><dd><p><a class="reference internal" href="#app.domain.network_nodes.Node.execute_epoch" title="app.domain.network_nodes.Node.execute_epoch"><code class="xref py py-meth docutils literal notranslate"><span class="pre">app.domain.network_nodes.Node.execute_epoch()</span></code></a>.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cluster</strong> (<em>th.ClusterType</em>) – Cluster instance that ordered execution of the epoch.</p></li>
<li><p><strong>fid</strong> (<em>str</em>) – The identifier that determines which file blocks
blocks should be routed.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.network_nodes.HiveNode.remove_file_routing">
<code class="sig-name descname">remove_file_routing</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fid</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/network_nodes.html#HiveNode.remove_file_routing"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Removes a file id from the routing table.</p>
<p>This method is called when a HiveNode is evicted from the Cluster
and results in the complete deletion of all file blocks with that
file id.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fid</strong> (<em>str</em>) – Id of the file whose routing information is being
removed from routing_table.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.network_nodes.HiveNode.replicate_part">
<code class="sig-name descname">replicate_part</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cluster</span></em>, <em class="sig-param"><span class="n">replica</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/network_nodes.html#HiveNode.replicate_part"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Tries to restore the <cite>replica</cite>’s
<code class="xref py py-const docutils literal notranslate"><span class="pre">REPLICATION_LEVEL</span></code>.</p>
<p>The file block replica is sent selectively in descending order to the
most reliable Nodes in the Cluster down to the least
reliable. Whereas
<code class="xref py py-meth docutils literal notranslate"><span class="pre">app.domain.network_nodes.HiveNode.send_part()</span></code>. follows
stochastic swarm guidance routing.</p>
<dl class="simple">
<dt>Overrides:</dt><dd><p><a class="reference internal" href="#app.domain.network_nodes.Node.replicate_part" title="app.domain.network_nodes.Node.replicate_part"><code class="xref py py-meth docutils literal notranslate"><span class="pre">app.domain.network_nodes.Node.replicate_part()</span></code></a>.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cluster</strong> (<em>th.ClusterType</em>) – </p></li>
<li><p><strong>replica</strong> (<em>sd.FileBlockData</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.network_nodes.HiveNode.select_destination">
<code class="sig-name descname">select_destination</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fid</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/network_nodes.html#HiveNode.select_destination"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Selects a random message destination according to <cite>routing_table</cite>
probabilities for the specified file name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fid</strong> (<em>str</em>) – The unique file identifier.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The name or address of the selected destination.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.network_nodes.HiveNode.set_file_routing">
<code class="sig-name descname">set_file_routing</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fid</span></em>, <em class="sig-param"><span class="n">transition_vector</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/network_nodes.html#HiveNode.set_file_routing"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Maps a file id with a transition column vector used for routing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fid</strong> (<em>str</em>) – The identifier of the file the Cluster is persisting.</p></li>
<li><p><strong>transition_vector</strong> (<em>Union</em><em>[</em><em>pandas.core.series.Series</em><em>, </em><em>pandas.core.frame.DataFrame</em><em>]</em>) – A column vector with probabilities that dictate the odds of
sending file block blocks belonging to the file with
specified id to other Cluster members also working on the
persistence of the file block blocks.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If <code class="docutils literal notranslate"><span class="pre">transition_vector</span></code> is not a pandas DataFrame and cannot
    be directly converted to it.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="app.domain.network_nodes.HiveNodeExt">
<em class="property">class </em><code class="sig-name descname">HiveNodeExt</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">uid</span></em>, <em class="sig-param"><span class="n">uptime</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/network_nodes.html#HiveNodeExt"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Bases: <a class="reference internal" href="#app.domain.network_nodes.HiveNode" title="app.domain.network_nodes.HiveNode"><code class="xref py py-class docutils literal notranslate"><span class="pre">app.domain.network_nodes.HiveNode</span></code></a></p>
<p>Represents a network node that executes a Swarm Guidance algorithm.</p>
<p>HiveNodeExt instances differ from HiveNode in the sense that the
<code class="xref py py-class docutils literal notranslate"><span class="pre">HiveClusterExt</span> <span class="pre">Nodes</span></code> do not monitor their
groups’ peers, concerning suspicious behaviors.</p>
<dl class="py method">
<dt id="app.domain.network_nodes.HiveNodeExt.get_status">
<code class="sig-name descname">get_status</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/network_nodes.html#HiveNodeExt.get_status"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Used to obtain the status of the worker.</p>
<dl class="simple">
<dt>Overrides:</dt><dd><p><a class="reference internal" href="#app.domain.network_nodes.Node.get_status" title="app.domain.network_nodes.Node.get_status"><code class="xref py py-meth docutils literal notranslate"><span class="pre">app.domain.network_nodes.Node.get_status()</span></code></a>.
When not ONLINE the node sets itself as Suspect and will only become
offline when the monitor marks him as so (e.g.: due to complaints).</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The status of the worker. See
<a class="reference internal" href="app.domain.helpers.html#app.domain.helpers.enums.Status" title="app.domain.helpers.enums.Status"><code class="xref py py-class docutils literal notranslate"><span class="pre">app.domain.helpers.enums.Status</span></code></a>.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="app.domain.network_nodes.Node">
<em class="property">class </em><code class="sig-name descname">Node</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">uid</span></em>, <em class="sig-param"><span class="n">uptime</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/network_nodes.html#Node"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This class contains basic network node functionality that should
always be useful.</p>
<dl class="py attribute">
<dt id="app.domain.network_nodes.Node.id">
<code class="sig-name descname">id</code></dt>
<dd><p>A unique identifier of the worker instance on the network.
It could be an UUID, a username or an IP-Address.</p>
</dd></dl>

<dl class="py attribute">
<dt id="app.domain.network_nodes.Node.uptime">
<code class="sig-name descname">uptime</code></dt>
<dd><p>The amount of time the worker is expected to remain online
without disconnection. Current uptime implementation is based on
availability percentages. Furthermore, when a HiveNode joins
an Cluster as a replacement for some other HiveNode, in
<code class="xref py py-meth docutils literal notranslate"><span class="pre">app.domain.cluster_groups.Cluster._membership_maintenance()</span></code>
, the time the worker has been online is not considered. Thus,
if a HiveNode belongs to only one Cluster he is guaranteed to
remain online for exactly <cite>uptime</cite> *
<code class="xref py py-attr docutils literal notranslate"><span class="pre">environment_settings.MAX_EPOCHS</span></code>. If he belongs to
multiple Hives in the simulation, than there is a possibility
that he may go offline earlier.</p>
</dd></dl>

<dl class="py attribute">
<dt id="app.domain.network_nodes.Node.status">
<code class="sig-name descname">status</code></dt>
<dd><p>Indicates if the <code class="docutils literal notranslate"><span class="pre">Node</span></code> instance is online or offline. In later
releases this could also contain a ‘suspect’ status. See
<a class="reference internal" href="app.domain.helpers.html#app.domain.helpers.enums.Status" title="app.domain.helpers.enums.Status"><code class="xref py py-class docutils literal notranslate"><span class="pre">app.domain.helpers.enums.Status</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt id="app.domain.network_nodes.Node.suspicious_replies">
<code class="sig-name descname">suspicious_replies</code></dt>
<dd><p>Set that contains <a class="reference internal" href="app.domain.helpers.html#app.domain.helpers.enums.HttpCodes" title="app.domain.helpers.enums.HttpCodes"><code class="xref py py-class docutils literal notranslate"><span class="pre">app.domain.helpers.enums.HttpCodes</span></code></a>
that trigger complaints to monitors.</p>
</dd></dl>

<dl class="py attribute">
<dt id="app.domain.network_nodes.Node.files">
<code class="sig-name descname">files</code></dt>
<dd><p>A dictionary mapping file names to file block identifiers and their
respective contents. This collection represents the file block
blocks that are currently hosted in the HiveNode instance.</p>
</dd></dl>

<dl class="py method">
<dt id="app.domain.network_nodes.Node.__eq__">
<code class="sig-name descname">__eq__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">other</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/network_nodes.html#Node.__eq__"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Node equality is based solely on HiveNode id.</p>
</dd></dl>

<dl class="py method">
<dt id="app.domain.network_nodes.Node.__hash__">
<code class="sig-name descname">__hash__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/network_nodes.html#Node.__hash__"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Can use Node instance or id as dictionary key.</p>
</dd></dl>

<dl class="py method">
<dt id="app.domain.network_nodes.Node.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">uid</span></em>, <em class="sig-param"><span class="n">uptime</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/network_nodes.html#Node.__init__"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Instantiates a HiveNode object.</p>
<p>Workers are the network nodes responsible for persisting file block
blocks.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>uid</strong> (<em>str</em>) – An unique identifier for the worker instance.</p></li>
<li><p><strong>uptime</strong> (<em>float</em>) – The availability of the worker instance.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.network_nodes.Node.discard_part">
<code class="sig-name descname">discard_part</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fid</span></em>, <em class="sig-param"><span class="n">number</span></em>, <em class="sig-param"><span class="n">corrupt</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">cluster</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/network_nodes.html#Node.discard_part"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Safely deletes a part from the HiveNode instance’s disk.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fid</strong> (<em>str</em>) – Name of the file the file block replica belongs to.</p></li>
<li><p><strong>number</strong> (<em>int</em>) – The part number that uniquely identifies the file block.</p></li>
<li><p><strong>corrupt</strong> (<em>bool</em>) – If discard is being invoked due to identified file
block corruption, e.g., Sha256 does not match the expected.</p></li>
<li><p><strong>cluster</strong> (<em>th.ClusterType</em>) – Gateway Cluster that will set the recovery epoch (see
<code class="xref py py-meth docutils literal notranslate"><span class="pre">domain.cluster_groups.Cluster.set_recovery_epoch()</span></code>
or mark the simulation as failed.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.network_nodes.Node.execute_epoch">
<code class="sig-name descname">execute_epoch</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cluster</span></em>, <em class="sig-param"><span class="n">fid</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/network_nodes.html#Node.execute_epoch"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Instructs the HiveNode instance to execute the epoch.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cluster</strong> (<em>th.ClusterType</em>) – </p></li>
<li><p><strong>fid</strong> (<em>str</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.network_nodes.Node.get_file_parts">
<code class="sig-name descname">get_file_parts</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fid</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/network_nodes.html#Node.get_file_parts"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Gets collection of file parts that correspond to the named file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fid</strong> (<em>str</em>) – The identifier that designates the file block blocks
the caller wishes to obtain from the HiveNode instance.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A collection that maps file block identifiers to file block
containers.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>th.ReplicasDict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.network_nodes.Node.get_file_parts_count">
<code class="sig-name descname">get_file_parts_count</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fid</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/network_nodes.html#Node.get_file_parts_count"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Counts the number of file block blocks owned by the HiveNode
for a given file identifier.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fid</strong> (<em>str</em>) – An identifier of the file caller wishes to count.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The number of file block blocks from the named file the HiveNode
instance possesses.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.network_nodes.Node.get_status">
<code class="sig-name descname">get_status</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/network_nodes.html#Node.get_status"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Used to obtain the status of the worker.</p>
<p>This method simulates a ping. When invoked, the HiveNode instance
decides if it should switch its status from ONLINE to some other
depending on the time it has been active in the Cluster.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The status of the worker. See
<code class="xref py py-class docutils literal notranslate"><span class="pre">domain.helpers.enums.e.Status</span></code>.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.network_nodes.Node.receive_part">
<code class="sig-name descname">receive_part</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">replica</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/network_nodes.html#Node.receive_part"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Endpoint for file block replica reception.</p>
<p>Invoking this method results in the worker keeping store a new
file block replica in his <a class="reference internal" href="#app.domain.network_nodes.Node.files" title="app.domain.network_nodes.Node.files"><code class="xref py py-attr docutils literal notranslate"><span class="pre">files</span></code></a> collection, along the ones
already there.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>replica</strong> (<a class="reference internal" href="app.domain.helpers.html#app.domain.helpers.smart_dataclasses.FileBlockData" title="app.domain.helpers.smart_dataclasses.FileBlockData"><em>domain.helpers.smart_dataclasses.FileBlockData</em></a>) – The file block container to be received by the worker instance.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An HTTP code defined in
<code class="xref py py-class docutils literal notranslate"><span class="pre">domain.helpers.enums.HttpCodes</span></code>. If upon integrity
verification the sha256 hashvalue differs from the expected,
the worker replies with a BAD_REQUEST code. If the HiveNode already
owns a replica with the same number identifier it
replies with NOT_ACCEPTABLE. Otherwise it replies with a OK,
i.e., the delivery is successful.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.network_nodes.Node.replicate_part">
<code class="sig-name descname">replicate_part</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cluster</span></em>, <em class="sig-param"><span class="n">replica</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/network_nodes.html#Node.replicate_part"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Tries to restore the <cite>replica</cite>’s
<code class="xref py py-const docutils literal notranslate"><span class="pre">environment_settings.REPLICATION_LEVEL</span></code>.</p>
<p>Similar to <code class="xref py py-meth docutils literal notranslate"><span class="pre">domain.network_nodes.Node.send_part()</span></code> but with
slightly different instructions. In particular newly replicate
replicas can not be corrupted at the current node, at the current epoch.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cluster</strong> (<em>th.ClusterType</em>) – Gateway Cluster that will deliver the file block replica to
some destination HiveNode.</p></li>
<li><p><strong>replica</strong> (<em>sd.FileBlockData</em>) – The file block replica to be delivered.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.domain.network_nodes.Node.send_part">
<code class="sig-name descname">send_part</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cluster</span></em>, <em class="sig-param"><span class="n">destination</span></em>, <em class="sig-param"><span class="n">replica</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/app/domain/network_nodes.html#Node.send_part"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Attempts to send a replica to some other network node.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cluster</strong> (<em>th.ClusterType</em>) – <code class="xref py py-mod docutils literal notranslate"><span class="pre">Cluster</span> <span class="pre">Group</span> <span class="pre">Monitor</span></code> that
will act as a courier for the message to be sent. In a real
world implementation this argument would not be needed and
would not even make sense, but we use it to facilitate
simulation management and environment logging.</p></li>
<li><p><strong>destination</strong> (<em>str</em>) – The name, address or another unique identifier of the node
that will receive the file block <cite>replica</cite>.</p></li>
<li><p><strong>replica</strong> (<em>sd.FileBlockData</em>) – The file block container to be sent to some other worker.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An HTTP code defined in
<code class="xref py py-class docutils literal notranslate"><span class="pre">domain.helpers.enums.HttpCodes</span></code> and the destination
the part was sent to.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>th.HttpResponse</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
</div>


            </div>

        </section>

        
            <nav class="site-bottom-navigation" role="navigation">
            
                <a href="app.domain.helpers.html" class="btn btn--primary btn--next right"
                    title="app.domain.helpers" accesskey="n">
                    Next
                </a>
            
            
                <a href="app.html" class="btn btn--primary btn--prev"
                    title="App Documentation" accesskey="p">
                    Previous
                </a>
            
            </nav>
        

        
            <div class="source-link">
            
                
            
            </div>
        



    </main>

    <footer class="site-footer">
<div class="container">

    <div role="contentinfo">
        <p>
                &copy; Copyright 2020, Francisco Barros.
        </p>
    </div>
        <p>Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
        <a href="https://github.com/testthedocs/sphinx_ttd_theme">theme</a>
        provided by <a href="https://testthedocs">TestTheDocs</a>. 

</div>
</footer>

    

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'',
            VERSION:'1.6.0rc1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <script type="text/javascript" src="_static/js/theme-min.js"></script> 
</body>
</html>